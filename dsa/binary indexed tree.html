<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>binary indexed tree - Programming Questions</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            line-height: 1.6;
            color: #e0e0e0;
            background-color: #0d1117;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #161b22;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #21262d 0%, #30363d 100%);
            color: #f0f6fc;
            padding: 40px 30px;
            border-bottom: 2px solid #30363d;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 600;
            color: #58a6ff;
            text-transform: capitalize;
            letter-spacing: -0.02em;
        }
        
        .header-info {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            align-items: center;
            margin-top: 15px;
        }
        
        .header-info p {
            font-size: 1.1rem;
            color: #8b949e;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .header-info strong {
            color: #f0f6fc;
            font-weight: 600;
        }
        
        .header-badge {
            background-color: #238636;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .toc {
            background: linear-gradient(135deg, #21262d 0%, #30363d 100%);
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .toc h2 {
            color: #58a6ff;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .toc ul {
            list-style: none;
            max-height: 400px;
            overflow-y: auto;
            overflow-x: hidden;
            word-wrap: break-word;
        }
        
        .toc li {
            padding: 12px 0;
            border-bottom: 1px solid #30363d;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .toc li:last-child {
            border-bottom: none;
        }
        
        .toc li:hover {
            background-color: rgba(88, 166, 255, 0.1);
            border-radius: 6px;
            margin: 0 -10px;
            padding-left: 10px;
            padding-right: 10px;
        }
        
        .toc-link {
            color: #e0e0e0;
            text-decoration: none;
            flex: 1;
            font-weight: 500;
            transition: color 0.2s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
            margin-right: 10px;
        }
        
        .toc-link:hover {
            color: #58a6ff;
        }
        
        .toc-platform {
            color: #8b949e;
            font-size: 0.85rem;
            background-color: #30363d;
            padding: 4px 10px;
            border-radius: 15px;
            font-weight: 500;
            flex-shrink: 0;
        }
        
        .question-card {
            border: 1px solid #30363d;
            border-radius: 12px;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #21262d 0%, #161b22 100%);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .question-title-section {
            flex: 1;
            min-width: 200px;
        }
        
        .question-title {
            margin: 0;
        }
        
        .question-title a {
            color: #58a6ff;
            text-decoration: none;
            font-size: 1.4rem;
            font-weight: 600;
            line-height: 1.3;
            transition: color 0.2s ease;
        }
        
        .question-title a:hover {
            color: #79c0ff;
            text-decoration: underline;
        }
        
        .question-meta {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 12px;
        }
        
        .platform-badge {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .difficulty-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .difficulty-badge.easy {
            background: linear-gradient(135deg, #238636 0%, #2ea043 100%);
        }
        
        .difficulty-badge.medium {
            background: linear-gradient(135deg, #da7633 0%, #fb8500 100%);
        }
        
        .difficulty-badge.hard {
            background: linear-gradient(135deg, #da3633 0%, #f85149 100%);
        }
        
        .availability-badge {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .availability-badge.solution {
            background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
        }
        
        .availability-badge.explanation {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }
        
        .topics-section {
            margin-bottom: 25px;
            padding: 20px;
            background-color: #0d1117;
            border-radius: 8px;
            border: 1px solid #30363d;
        }
        
        .topics-section strong {
            color: #f0f6fc;
            font-weight: 600;
        }
        
        .topic-badge {
            background: linear-gradient(135deg, #30363d 0%, #21262d 100%);
            color: #e0e0e0;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-right: 8px;
            margin-bottom: 6px;
            display: inline-block;
            font-weight: 500;
            border: 1px solid #30363d;
            transition: all 0.2s ease;
        }
        
        .topic-badge:hover {
            background: linear-gradient(135deg, #58a6ff 0%, #79c0ff 100%);
            color: white;
            transform: translateY(-1px);
        }
        
        .content-section {
            background-color: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            overflow-x: auto;
        }
        
        .solution-section, .explanation-section {
            margin: 25px 0;
        }
        
        .solution-section h3, .explanation-section h3 {
            color: #58a6ff;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        /* Enhanced content styling */
        .content-section h1, .content-section h2, .content-section h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #f0f6fc;
            font-weight: 600;
        }
        
        .content-section p {
            margin-bottom: 15px;
            color: #e0e0e0;
            line-height: 1.7;
        }
        
        .content-section ul, .content-section ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }
        
        .content-section li {
            margin-bottom: 8px;
        }
        
        .content-section pre {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 15px 0;
            color: #e0e0e0;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .content-section code {
            background-color: #21262d;
            border-radius: 4px;
            font-size: 0.9rem;
            padding: 0.3em 0.5em;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            color: #f85149;
            border: 1px solid #30363d;
        }
        
        .content-section pre code {
            background-color: transparent;
            padding: 0;
            color: #e0e0e0;
            border: none;
        }
        
        .content-section a {
            color: #58a6ff;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        .content-section a:hover {
            color: #79c0ff;
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header-info {
                gap: 15px;
                flex-direction: column;
                align-items: flex-start;
            }
            
            .content {
                padding: 25px 20px;
            }
            
            .question-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .question-meta {
                width: 100%;
            }
            
            .toc {
                padding: 20px;
            }
            
            .question-card {
                padding: 25px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>binary indexed tree</h1>
            <div class="header-info">
                <p><strong>Total Questions:</strong> <span class="header-badge">34</span></p>
                <p><strong>Generated by:</strong> pushkar</p>
                <p><strong>Date:</strong> August 24, 2025</p>
            </div>
        </header>
        
        <div class="content">
            <div class="toc">
                <h2>📋 Table of Contents</h2>
                <ul>
                    <li><a href="#question-0" class="toc-link">Alternating Groups III</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-1" class="toc-link">Block Placement Queries</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-2" class="toc-link">Booking Concert Tickets in Groups</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-3" class="toc-link">Count Good Triplets in an Array</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-4" class="toc-link">Count Increasing Quadruplets</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-5" class="toc-link">Count Number of Rectangles Containing Each Point</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-6" class="toc-link">Count Number of Teams</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-7" class="toc-link">Count of Range Sum</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-8" class="toc-link">Count of Smaller Numbers After Self</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-9" class="toc-link">Create Sorted Array through Instructions</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-10" class="toc-link">Distribute Elements Into Two Arrays II</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-11" class="toc-link">Find Building Where Alice and Bob Can Meet</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-12" class="toc-link">Find the Longest Valid Obstacle Course at Each Position</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-13" class="toc-link">Longest Increasing Subsequence II</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-14" class="toc-link">Longest Uploaded Prefix</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-15" class="toc-link">Make Array Empty</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-16" class="toc-link">Maximum Area Rectangle With Point Constraints I</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-17" class="toc-link">Maximum Area Rectangle With Point Constraints II</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-18" class="toc-link">Maximum Balanced Subsequence Sum</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-19" class="toc-link">Maximum Sum Queries</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-20" class="toc-link">Minimum Number of Moves to Make Palindrome</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-21" class="toc-link">Minimum Possible Integer After at Most K Adjacent Swaps On Digits</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-22" class="toc-link">Number of Integers With Popcount-Depth Equal to K II</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-23" class="toc-link">Number of Longest Increasing Subsequence</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-24" class="toc-link">Number of Pairs Satisfying Inequality</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-25" class="toc-link">Online Majority Element In Subarray</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-26" class="toc-link">Peaks in Array</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-27" class="toc-link">Queries on a Permutation With Key</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-28" class="toc-link">Queue Reconstruction by Height</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-29" class="toc-link">Range Sum Query - Mutable</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-30" class="toc-link">Reverse Pairs</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-31" class="toc-link">Shortest Path in a Weighted Tree</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-32" class="toc-link">Subarrays Distinct Element Sum of Squares II</a> <span class="toc-platform">LeetCode</span></li>
<li><a href="#question-33" class="toc-link">The Skyline Problem</a> <span class="toc-platform">LeetCode</span></li>
                </ul>
            </div>
            
            <div class="question-card" id="question-0">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/alternating-groups-iii/description" target="_blank" rel="noopener noreferrer">Alternating Groups III</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>There are some red and blue tiles arranged circularly. You are given an array of integers <code>colors</code> and a 2D integers array <code>queries</code>.</p>

<p>The color of tile <code>i</code> is represented by <code>colors[i]</code>:</p>

<ul>
	<li><code>colors[i] == 0</code> means that tile <code>i</code> is <strong>red</strong>.</li>
	<li><code>colors[i] == 1</code> means that tile <code>i</code> is <strong>blue</strong>.</li>
</ul>

<p>An <strong>alternating</strong> group is a contiguous subset of tiles in the circle with <strong>alternating</strong> colors (each tile in the group except the first and last one has a different color from its <b>adjacent</b> tiles in the group).</p>

<p>You have to process queries of two types:</p>

<ul>
	<li><code>queries[i] = [1, size<sub>i</sub>]</code>, determine the count of <strong>alternating</strong> groups with size <code>size<sub>i</sub></code>.</li>
	<li><code>queries[i] = [2, index<sub>i</sub>, color<sub>i</sub>]</code>, change <code>colors[index<sub>i</sub>]</code> to <code>color<font face="monospace"><sub>i</sub></font></code>.</li>
</ul>

<p>Return an array <code>answer</code> containing the results of the queries of the first type <em>in order</em>.</p>

<p><strong>Note</strong> that since <code>colors</code> represents a <strong>circle</strong>, the <strong>first</strong> and the <strong>last</strong> tiles are considered to be next to each other.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">colors = [0,1,1,0,1], queries = [[2,1,0],[1,4]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[2]</span></p>

<p><strong>Explanation:</strong></p>

<p><strong class="example"><img alt="" data-darkreader-inline-bgcolor="" data-darkreader-inline-bgimage="" src="https://assets.leetcode.com/uploads/2024/06/03/screenshot-from-2024-06-03-20-14-44.png" style="width: 150px; height: 150px; padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor: #181a1b;" /></strong></p>

<p>First query:</p>

<p>Change <code>colors[1]</code> to 0.</p>

<p><img alt="" data-darkreader-inline-bgcolor="" data-darkreader-inline-bgimage="" src="https://assets.leetcode.com/uploads/2024/06/03/screenshot-from-2024-06-03-20-20-25.png" style="width: 150px; height: 150px; padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor: #181a1b;" /></p>

<p>Second query:</p>

<p>Count of the alternating groups with size 4:</p>

<p><img alt="" data-darkreader-inline-bgcolor="" data-darkreader-inline-bgimage="" src="https://assets.leetcode.com/uploads/2024/06/03/screenshot-from-2024-06-03-20-25-02-2.png" style="width: 150px; height: 150px; padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor: #181a1b;" /><img alt="" data-darkreader-inline-bgcolor="" data-darkreader-inline-bgimage="" src="https://assets.leetcode.com/uploads/2024/06/03/screenshot-from-2024-06-03-20-24-12.png" style="width: 150px; height: 150px; padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor: #181a1b;" /></p>
</div>

<p><strong class="example">Example 2:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">colors = [0,0,1,0,1,1], queries = [[1,3],[2,3,0],[1,5]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[2,0]</span></p>

<p><strong>Explanation:</strong></p>

<p><img alt="" data-darkreader-inline-bgcolor="" data-darkreader-inline-bgimage="" src="https://assets.leetcode.com/uploads/2024/06/03/screenshot-from-2024-06-03-20-35-50.png" style="width: 150px; height: 150px; padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor: #181a1b;" /></p>

<p>First query:</p>

<p>Count of the alternating groups with size 3:</p>

<p><img alt="" data-darkreader-inline-bgcolor="" data-darkreader-inline-bgimage="" src="https://assets.leetcode.com/uploads/2024/06/03/screenshot-from-2024-06-03-20-37-13.png" style="width: 150px; height: 150px; padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor: #181a1b;" /><img alt="" data-darkreader-inline-bgcolor="" data-darkreader-inline-bgimage="" src="https://assets.leetcode.com/uploads/2024/06/03/screenshot-from-2024-06-03-20-36-40.png" style="width: 150px; height: 150px; padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor: #181a1b;" /></p>

<p>Second query: <code>colors</code> will not change.</p>

<p>Third query: There is no alternating group with size 5.</p>
</div>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>4 &lt;= colors.length &lt;= 5 * 10<sup>4</sup></code></li>
	<li><code>0 &lt;= colors[i] &lt;= 1</code></li>
	<li><code>1 &lt;= queries.length &lt;= 5 * 10<sup>4</sup></code></li>
	<li><code>queries[i][0] == 1</code> or <code>queries[i][0] == 2</code></li>
	<li>For all <code>i</code> that:
	<ul>
		<li><code>queries[i][0] == 1</code>: <code>queries[i].length == 2</code>, <code>3 &lt;= queries[i][1] &lt;= colors.length - 1</code></li>
		<li><code>queries[i][0] == 2</code>: <code>queries[i].length == 3</code>, <code>0 &lt;= queries[i][1] &lt;= colors.length - 1</code>, <code>0 &lt;= queries[i][2] &lt;= 1</code></li>
	</ul>
	</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-1">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/block-placement-queries/description" target="_blank" rel="noopener noreferrer">Block Placement Queries</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>There exists an infinite number line, with its origin at 0 and extending towards the <strong>positive</strong> x-axis.</p>

<p>You are given a 2D array <code>queries</code>, which contains two types of queries:</p>

<ol>
	<li>For a query of type 1, <code>queries[i] = [1, x]</code>. Build an obstacle at distance <code>x</code> from the origin. It is guaranteed that there is <strong>no</strong> obstacle at distance <code>x</code> when the query is asked.</li>
	<li>For a query of type 2, <code>queries[i] = [2, x, sz]</code>. Check if it is possible to place a block of size <code>sz</code> <em>anywhere</em> in the range <code>[0, x]</code> on the line, such that the block <strong>entirely</strong> lies in the range <code>[0, x]</code>. A block <strong>cannot </strong>be placed if it intersects with any obstacle, but it may touch it. Note that you do<strong> not</strong> actually place the block. Queries are separate.</li>
</ol>

<p>Return a boolean array <code>results</code>, where <code>results[i]</code> is <code>true</code> if you can place the block specified in the <code>i<sup>th</sup></code> query of type 2, and <code>false</code> otherwise.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">queries = [[1,2],[2,3,3],[2,3,1],[2,2,2]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[false,true,true]</span></p>

<p><strong>Explanation:</strong></p>

<p><strong><img alt="" src="https://assets.leetcode.com/uploads/2024/04/22/example0block.png" style="padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; width: 309px; height: 129px;" /></strong></p>

<p>For query 0, place an obstacle at <code>x = 2</code>. A block of size at most 2 can be placed before <code>x = 3</code>.</p>
</div>

<p><strong class="example">Example 2:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">queries = </span>[[1,7],[2,7,6],[1,2],[2,7,5],[2,7,6]]<!-- notionvc: 4a471445-5af1-4d72-b11b-94d351a2c8e9 --></p>

<p><strong>Output:</strong> [true,true,false]</p>

<p><strong>Explanation:</strong></p>

<p><strong><img alt="" src="https://assets.leetcode.com/uploads/2024/04/22/example1block.png" style="padding: 10px; background: rgb(255, 255, 255); border-radius: 0.5rem; width: 310px; height: 130px;" /></strong></p>

<ul>
	<li>Place an obstacle at <code>x = 7</code> for query 0. A block of size at most 7 can be placed before <code>x = 7</code>.</li>
	<li>Place an obstacle at <code>x = 2</code> for query 2. Now, a block of size at most 5 can be placed before <code>x = 7</code>, and a block of size at most 2 before <code>x = 2</code>.</li>
</ul>
</div>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= queries.length &lt;= 15 * 10<sup>4</sup></code></li>
	<li><code>2 &lt;= queries[i].length &lt;= 3</code></li>
	<li><code>1 &lt;= queries[i][0] &lt;= 2</code></li>
	<li><code>1 &lt;= x, sz &lt;= min(5 * 10<sup>4</sup>, 3 * queries.length)</code></li>
	<li>The input is generated such that for queries of type 1, no obstacle exists at distance <code>x</code> when the query is asked.</li>
	<li>The input is generated such that there is at least one query of type 2.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-2">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/booking-concert-tickets-in-groups/description" target="_blank" rel="noopener noreferrer">Booking Concert Tickets in Groups</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">design</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>A concert hall has <code>n</code> rows numbered from <code>0</code> to <code>n - 1</code>, each with <code>m</code> seats, numbered from <code>0</code> to <code>m - 1</code>. You need to design a ticketing system that can allocate seats in the following cases:</p>

<ul>
	<li>If a group of <code>k</code> spectators can sit <strong>together</strong> in a row.</li>
	<li>If <strong>every</strong> member of a group of <code>k</code> spectators can get a seat. They may or <strong>may not</strong> sit together.</li>
</ul>

<p>Note that the spectators are very picky. Hence:</p>

<ul>
	<li>They will book seats only if each member of their group can get a seat with row number <strong>less than or equal</strong> to <code>maxRow</code>. <code>maxRow</code> can <strong>vary</strong> from group to group.</li>
	<li>In case there are multiple rows to choose from, the row with the <strong>smallest</strong> number is chosen. If there are multiple seats to choose in the same row, the seat with the <strong>smallest</strong> number is chosen.</li>
</ul>

<p>Implement the <code>BookMyShow</code> class:</p>

<ul>
	<li><code>BookMyShow(int n, int m)</code> Initializes the object with <code>n</code> as number of rows and <code>m</code> as number of seats per row.</li>
	<li><code>int[] gather(int k, int maxRow)</code> Returns an array of length <code>2</code> denoting the row and seat number (respectively) of the <strong>first seat</strong> being allocated to the <code>k</code> members of the group, who must sit <strong>together</strong>. In other words, it returns the smallest possible <code>r</code> and <code>c</code> such that all <code>[c, c + k - 1]</code> seats are valid and empty in row <code>r</code>, and <code>r &lt;= maxRow</code>. Returns <code>[]</code> in case it is <strong>not possible</strong> to allocate seats to the group.</li>
	<li><code>boolean scatter(int k, int maxRow)</code> Returns <code>true</code> if all <code>k</code> members of the group can be allocated seats in rows <code>0</code> to <code>maxRow</code>, who may or <strong>may not</strong> sit together. If the seats can be allocated, it allocates <code>k</code> seats to the group with the <strong>smallest</strong> row numbers, and the smallest possible seat numbers in each row. Otherwise, returns <code>false</code>.</li>
</ul>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input</strong>
[&quot;BookMyShow&quot;, &quot;gather&quot;, &quot;gather&quot;, &quot;scatter&quot;, &quot;scatter&quot;]
[[2, 5], [4, 0], [2, 0], [5, 1], [5, 1]]
<strong>Output</strong>
[null, [0, 0], [], true, false]

<strong>Explanation</strong>
BookMyShow bms = new BookMyShow(2, 5); // There are 2 rows with 5 seats each 
bms.gather(4, 0); // return [0, 0]
                  // The group books seats [0, 3] of row 0. 
bms.gather(2, 0); // return []
                  // There is only 1 seat left in row 0,
                  // so it is not possible to book 2 consecutive seats. 
bms.scatter(5, 1); // return True
                   // The group books seat 4 of row 0 and seats [0, 3] of row 1. 
bms.scatter(5, 1); // return False
                   // There is only one seat left in the hall.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= n &lt;= 5 * 10<sup>4</sup></code></li>
	<li><code>1 &lt;= m, k &lt;= 10<sup>9</sup></code></li>
	<li><code>0 &lt;= maxRow &lt;= n - 1</code></li>
	<li>At most <code>5 * 10<sup>4</sup></code> calls <strong>in total</strong> will be made to <code>gather</code> and <code>scatter</code>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-3">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/count-good-triplets-in-an-array/description" target="_blank" rel="noopener noreferrer">Count Good Triplets in an Array</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						<span class="availability-badge solution">Solution</span>
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">merge sort</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given two <strong>0-indexed</strong> arrays <code>nums1</code> and <code>nums2</code> of length <code>n</code>, both of which are <strong>permutations</strong> of <code>[0, 1, ..., n - 1]</code>.</p>

<p>A <strong>good triplet</strong> is a set of <code>3</code> <strong>distinct</strong> values which are present in <strong>increasing order</strong> by position both in <code>nums1</code> and <code>nums2</code>. In other words, if we consider <code>pos1<sub>v</sub></code> as the index of the value <code>v</code> in <code>nums1</code> and <code>pos2<sub>v</sub></code> as the index of the value <code>v</code> in <code>nums2</code>, then a good triplet will be a set <code>(x, y, z)</code> where <code>0 &lt;= x, y, z &lt;= n - 1</code>, such that <code>pos1<sub>x</sub> &lt; pos1<sub>y</sub> &lt; pos1<sub>z</sub></code> and <code>pos2<sub>x</sub> &lt; pos2<sub>y</sub> &lt; pos2<sub>z</sub></code>.</p>

<p>Return <em>the <strong>total number</strong> of good triplets</em>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums1 = [2,0,1,3], nums2 = [0,1,2,3]
<strong>Output:</strong> 1
<strong>Explanation:</strong> 
There are 4 triplets (x,y,z) such that pos1<sub>x</sub> &lt; pos1<sub>y</sub> &lt; pos1<sub>z</sub>. They are (2,0,1), (2,0,3), (2,1,3), and (0,1,3). 
Out of those triplets, only the triplet (0,1,3) satisfies pos2<sub>x</sub> &lt; pos2<sub>y</sub> &lt; pos2<sub>z</sub>. Hence, there is only 1 good triplet.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums1 = [4,0,1,3,2], nums2 = [4,1,0,2,3]
<strong>Output:</strong> 4
<strong>Explanation:</strong> The 4 good triplets are (4,0,3), (4,0,2), (4,1,3), and (4,1,2).
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>n == nums1.length == nums2.length</code></li>
	<li><code>3 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>0 &lt;= nums1[i], nums2[i] &lt;= n - 1</code></li>
	<li><code>nums1</code> and <code>nums2</code> are permutations of <code>[0, 1, ..., n - 1]</code>.</li>
</ul>
</div>
			</div>
			
			<div class="solution-section">
					<h3>Solution</h3>
					<div class="content-section"><p>[TOC]</p>
<h2 id="solution">Solution</h2>
<hr />
<h3 id="approach-1-binary-indexed-tree">Approach 1: Binary Indexed Tree</h3>
<h4 id="intuition">Intuition</h4>
<p>If <span class="math inline">\(i, j, k\)</span> satisfy <span class="math inline">\(0 \leq i < j < k < n\)</span> and <span class="math inline">\(0 \leq \textit{pos2}_{\textit{nums1}[i]} < \textit{pos2}_{\textit{nums1}[j]} < \textit{pos2}_{\textit{nums1}[k]} < n\)</span>, then <span class="math inline">\(\textit{nums1}[i]\)</span>, <span class="math inline">\(\textit{nums1}[j]\)</span>, <span class="math inline">\(\textit{nums1}[k]\)</span> form a good triplet. Because both <span class="math inline">\(\textit{nums1}\)</span> and <span class="math inline">\(\textit{nums2}\)</span> are permutations of <span class="math inline">\(0\)</span> to <span class="math inline">\(n-1\)</span>, we can count the number of good triplets by calculating the number of triplets <span class="math inline">\(i, j, k\)</span> that meet the conditions.</p>
<p>An array <span class="math inline">\(\textit{indexMapping}\)</span> is used to express the above relationship, where <span class="math inline">\(\textit{indexMapping}[i] = \textit{pos2}_{\textit{nums1}[i]}\)</span>, and <span class="math inline">\(\textit{indexMapping}\)</span> is also a permutation of <span class="math inline">\(0\)</span> to <span class="math inline">\(n-1\)</span>. When calculating the number of triplets <span class="math inline">\(i, j, k\)</span> that meet the conditions, we can first fix <span class="math inline">\(j\)</span>, then count how many numbers are less than <span class="math inline">\(\textit{indexMapping}[j]\)</span> in the <span class="math inline">\(\textit{indexMapping}\)</span> array to the left of index <span class="math inline">\(j\)</span>, and denote it as <span class="math inline">\(\textit{left}\)</span>. Next, count how many numbers are greater than <span class="math inline">\(\textit{indexMapping}[j]\)</span> to the right of index <span class="math inline">\(j\)</span>, and denote it as <span class="math inline">\(\textit{right}\)</span>. Thus, <span class="math inline">\(\textit{left}\times\textit{right}\)</span> represents the number of triplets with the middle element as <span class="math inline">\(j\)</span>. By traversing all <span class="math inline">\(j\)</span>, the answer can be calculated.</p>
<p>The above calculation process can be referred to <a href="https://leetcode.com/problems/count-of-smaller-numbers-after-self/description/">315. Count of Smaller Numbers After Self</a>, using a binary indexed tree to solve. The binary indexed tree can complete increment and prefix sum operations for a certain index in <span class="math inline">\(O(\log{n})\)</span> time. When applying the binary indexed tree, we need to traverse the values in <span class="math inline">\(\textit{indexMapping}\)</span> from small to large, and calculate the prefix sum for the current index <span class="math inline">\(\textit{pos}\)</span>, which represents how many numbers are less than <span class="math inline">\(\textit{indexMapping}[pos]\)</span> to the left of index <span class="math inline">\(pos\)</span>. We can also calculate how many numbers are greater than <span class="math inline">\(\textit{indexMapping}[pos]\)</span> to the right of index <span class="math inline">\(pos\)</span>, and then add <span class="math inline">\(1\)</span> to the value of the current index. Since we are traversing according to the value size, we need another array <span class="math inline">\(\textit{reversedIndexMapping}\)</span> to save the indices of each value in <span class="math inline">\(\textit{indexMapping}\)</span>. In the code, the variable <span class="math inline">\(\textit{indexMapping}\)</span> can be omitted. The result can be returned after the traversal is completed.</p>
<h4 id="implementation">Implementation</h4>
<p><a href="https://leetcode.com/playground/CL98TQtb/shared">code</a></p>
<h4 id="complexity-analysis">Complexity Analysis</h4>
<ul>
<li>Time complexity: <span class="math inline">\(O(n\times\log{n})\)</span>.</li>
</ul>
<p>The binary indexed tree requires <span class="math inline">\(O(\log{n})\)</span> for each query and update operation, and we need to perform query and update operations on each index of the array during traversal.</p>
<ul>
<li>Space complexity: <span class="math inline">\(O(n)\)</span>.</li>
</ul>
<p>The binary indexed tree requires <span class="math inline">\(O(n)\)</span> space.</p>
</div>
				</div>
		</div>

<div class="question-card" id="question-4">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/count-increasing-quadruplets/description" target="_blank" rel="noopener noreferrer">Count Increasing Quadruplets</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">enumeration</span> <span class="topic-badge">prefix sum</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given a <strong>0-indexed</strong> integer array <code>nums</code> of size <code>n</code> containing all numbers from <code>1</code> to <code>n</code>, return <em>the number of increasing quadruplets</em>.</p>

<p>A quadruplet <code>(i, j, k, l)</code> is increasing if:</p>

<ul>
	<li><code>0 &lt;= i &lt; j &lt; k &lt; l &lt; n</code>, and</li>
	<li><code>nums[i] &lt; nums[k] &lt; nums[j] &lt; nums[l]</code>.</li>
</ul>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,3,2,4,5]
<strong>Output:</strong> 2
<strong>Explanation:</strong> 
- When i = 0, j = 1, k = 2, and l = 3, nums[i] &lt; nums[k] &lt; nums[j] &lt; nums[l].
- When i = 0, j = 1, k = 2, and l = 4, nums[i] &lt; nums[k] &lt; nums[j] &lt; nums[l]. 
There are no other quadruplets, so we return 2.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,2,3,4]
<strong>Output:</strong> 0
<strong>Explanation:</strong> There exists only one quadruplet with i = 0, j = 1, k = 2, l = 3, but since nums[j] &lt; nums[k], we return 0.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>4 &lt;= nums.length &lt;= 4000</code></li>
	<li><code>1 &lt;= nums[i] &lt;= nums.length</code></li>
	<li>All the integers of <code>nums</code> are <strong>unique</strong>. <code>nums</code> is a permutation.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-5">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/count-number-of-rectangles-containing-each-point/description" target="_blank" rel="noopener noreferrer">Count Number of Rectangles Containing Each Point</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">sorting</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a 2D integer array <code>rectangles</code> where <code>rectangles[i] = [l<sub>i</sub>, h<sub>i</sub>]</code> indicates that <code>i<sup>th</sup></code> rectangle has a length of <code>l<sub>i</sub></code> and a height of <code>h<sub>i</sub></code>. You are also given a 2D integer array <code>points</code> where <code>points[j] = [x<sub>j</sub>, y<sub>j</sub>]</code> is a point with coordinates <code>(x<sub>j</sub>, y<sub>j</sub>)</code>.</p>

<p>The <code>i<sup>th</sup></code> rectangle has its <strong>bottom-left corner</strong> point at the coordinates <code>(0, 0)</code> and its <strong>top-right corner</strong> point at <code>(l<sub>i</sub>, h<sub>i</sub>)</code>.</p>

<p>Return<em> an integer array </em><code>count</code><em> of length </em><code>points.length</code><em> where </em><code>count[j]</code><em> is the number of rectangles that <strong>contain</strong> the </em><code>j<sup>th</sup></code><em> point.</em></p>

<p>The <code>i<sup>th</sup></code> rectangle <strong>contains</strong> the <code>j<sup>th</sup></code> point if <code>0 &lt;= x<sub>j</sub> &lt;= l<sub>i</sub></code> and <code>0 &lt;= y<sub>j</sub> &lt;= h<sub>i</sub></code>. Note that points that lie on the <strong>edges</strong> of a rectangle are also considered to be contained by that rectangle.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2022/03/02/example1.png" style="width: 300px; height: 509px;" />
<pre>
<strong>Input:</strong> rectangles = [[1,2],[2,3],[2,5]], points = [[2,1],[1,4]]
<strong>Output:</strong> [2,1]
<strong>Explanation:</strong> 
The first rectangle contains no points.
The second rectangle contains only the point (2, 1).
The third rectangle contains the points (2, 1) and (1, 4).
The number of rectangles that contain the point (2, 1) is 2.
The number of rectangles that contain the point (1, 4) is 1.
Therefore, we return [2, 1].
</pre>

<p><strong class="example">Example 2:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2022/03/02/example2.png" style="width: 300px; height: 312px;" />
<pre>
<strong>Input:</strong> rectangles = [[1,1],[2,2],[3,3]], points = [[1,3],[1,1]]
<strong>Output:</strong> [1,3]
<strong>Explanation:
</strong>The first rectangle contains only the point (1, 1).
The second rectangle contains only the point (1, 1).
The third rectangle contains the points (1, 3) and (1, 1).
The number of rectangles that contain the point (1, 3) is 1.
The number of rectangles that contain the point (1, 1) is 3.
Therefore, we return [1, 3].
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= rectangles.length, points.length &lt;= 5 * 10<sup>4</sup></code></li>
	<li><code>rectangles[i].length == points[j].length == 2</code></li>
	<li><code>1 &lt;= l<sub>i</sub>, x<sub>j</sub> &lt;= 10<sup>9</sup></code></li>
	<li><code>1 &lt;= h<sub>i</sub>, y<sub>j</sub> &lt;= 100</code></li>
	<li>All the <code>rectangles</code> are <strong>unique</strong>.</li>
	<li>All the <code>points</code> are <strong>unique</strong>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-6">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/count-number-of-teams/description" target="_blank" rel="noopener noreferrer">Count Number of Teams</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						<span class="availability-badge solution">Solution</span>
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>There are <code>n</code> soldiers standing in a line. Each soldier is assigned a <strong>unique</strong> <code>rating</code> value.</p>

<p>You have to form a team of 3 soldiers amongst them under the following rules:</p>

<ul>
	<li>Choose 3 soldiers with index (<code>i</code>, <code>j</code>, <code>k</code>) with rating (<code>rating[i]</code>, <code>rating[j]</code>, <code>rating[k]</code>).</li>
	<li>A team is valid if: (<code>rating[i] &lt; rating[j] &lt; rating[k]</code>) or (<code>rating[i] &gt; rating[j] &gt; rating[k]</code>) where (<code>0 &lt;= i &lt; j &lt; k &lt; n</code>).</li>
</ul>

<p>Return the number of teams you can form given the conditions. (soldiers can be part of multiple teams).</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> rating = [2,5,3,4,1]
<strong>Output:</strong> 3
<strong>Explanation:</strong> We can form three teams given the conditions. (2,3,4), (5,4,1), (5,3,1). 
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> rating = [2,1,3]
<strong>Output:</strong> 0
<strong>Explanation:</strong> We can&#39;t form any team given the conditions.
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> rating = [1,2,3,4]
<strong>Output:</strong> 4
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>n == rating.length</code></li>
	<li><code>3 &lt;= n &lt;= 1000</code></li>
	<li><code>1 &lt;= rating[i] &lt;= 10<sup>5</sup></code></li>
	<li>All the integers in <code>rating</code> are <strong>unique</strong>.</li>
</ul>
</div>
			</div>
			
			<div class="solution-section">
					<h3>Solution</h3>
					<div class="content-section"><p>[TOC]</p>
<h2 id="solution">Solution</h2>
<hr />
<h3 id="approach-1-dynamic-programming-memoization">Approach 1: Dynamic Programming (Memoization)</h3>
<h4 id="intuition">Intuition</h4>
<p>The brute force approach to solving this problem involves checking all possible combinations of <code>rating</code> and counting those that meet our conditions. However, such an approach would have a time complexity of <span class="math inline">\(O(n^3)\)</span>, which would not satisfy the given constraints.</p>
<p>Instead of using nested loops to examine all possible combinations of soldiers, we can simplify the problem by breaking it down into smaller sub-problems. The core idea is to determine how many teams each soldier can join and then sum these totals to get the final answer.</p>
<p>We can achieve this by employing recursion. Specifically, we define a function called <code>countIncreasingTeams</code> that takes two parameters: an index from the <code>rating</code> array and the number of members currently in the team. This function will return the total number of valid teams that can be formed starting from the given index with the current team size.</p>
<p>For each soldier, the function will explore all potential next soldiers who can be added to the team, provided they satisfy the rating condition. It will then recursively count the number of valid teams that can be formed from this new state. The recursion will terminate when the team has reached the maximum size of three members. At each step, the function accumulates the number of valid teams and returns this count.</p>
<p>During the recursion, we might encounter the same sub-problem multiple times at different stages, which are known as overlapping sub-problems. To optimize our solution and avoid redundant computations, we use memoization. This technique involves storing the result of each sub-problem the first time it is computed so that when we encounter the same sub-problem again, we can retrieve the result from a cache rather than recomputing it.</p>
<p>Since we need to count both increasing and decreasing teams, we set up two separate recursive functions, each with its cache. Each sub-problem is uniquely identified by two states: the current index and the size of the team already formed.</p>
<p>To get the final result, we initiate our recursive functions starting from each index in the <code>rating</code> array. By summing the number of teams returned by each recursion, we obtain the total number of valid teams.</p>
<h4 id="algorithm">Algorithm</h4>
<p>Main method <code>numTeams</code>:</p>
<ul>
<li>Initialize:
<ul>
<li><code>n</code> as the length of <code>rating</code>.</li>
<li><code>teams</code> to store the total number of possible teams.</li>
<li>two arrays <code>increasingCache</code> and <code>decreasingCache</code> of size <span class="math inline">\(n \times 4\)</span> to serve as cache for the memoization.</li>
</ul>
</li>
<li>Loop over the array <code>rating</code>. For each index <code>startIndex</code>:
<ul>
<li>Call <code>countIncreasingTeams</code> and <code>countDecreasingTeams</code> with <code>startIndex</code>. Add their results to <code>teams</code>.</li>
</ul>
</li>
<li>Return <code>teams</code>.</li>
</ul>
<p>Helper method <code>countIncreasingTeams</code>:</p>
<ul>
<li>Define a method <code>countIncreasingTeams</code> with parameters: <code>rating</code>, <code>currentIndex</code>, <code>teamSize</code> and the cache <code>increasingCache</code>.</li>
<li>Initialize <code>n</code> as the length of <code>rating</code>.</li>
<li>If <code>currentIndex</code> is equal to <code>n</code>, return <code>0</code>.</li>
<li>If <code>teamSize</code> is equal to <code>3</code>, return <code>1</code>.</li>
<li>If <code>increasingCache</code> already contains an entry with the current state, return it.</li>
<li>Initialize a variable <code>validTeams</code> to <code>0</code>.</li>
<li>Loop over all indices from <code>currentIndex + 1</code> to the end of the array. For each index <code>nextIndex</code>:
<ul>
<li>If <code>rating[nextIndex]</code> is greater than <code>rating[currentIndex]</code>, call <code>countIncreasingTeams</code> with <code>nextIndex</code> and <code>teamSize</code> incremented by <code>1</code>.</li>
</ul>
</li>
<li>Cache <code>validTeams</code> with the current state in <code>increasingCache</code> and return it.</li>
</ul>
<p>Helper method <code>countDecreasingTeams</code>:</p>
<ul>
<li>Define a method <code>countDecreasingTeams</code> with parameters: <code>rating</code>, <code>currentIndex</code>, <code>teamSize</code> and the cache <code>decreasingCache</code>.</li>
<li>This method is exactly the same as <code>countIncreasingTeams</code> except for majorly one thing:
<ul>
<li>We check whether <code>rating[nextIndex]</code> is less than <code>rating[currentIndex]</code> to call <code>countDecreasingTeams</code>.</li>
</ul>
</li>
</ul>
<h4 id="implementation">Implementation</h4>
<p><a href="https://leetcode.com/playground/GV944Th5/shared">code</a></p>
<h4 id="complexity-analysis">Complexity Analysis</h4>
<p>Let <span class="math inline">\(n\)</span> be the length of the <code>rating</code> array.</p>
<ul>
<li>
<p>Time complexity: <span class="math inline">\(O(n^2)\)</span></p>
<p>The algorithm iterates through <code>rating</code>, each time calling <code>countIncreasingTeams</code> and <code>countDecreasingTeams</code>. In the worst case, the recursive functions might explore all subsequent soldiers for each call. However, due to memoization, each unique subproblem is only computed once. There are <span class="math inline">\(n\)</span> possible indices and <span class="math inline">\(3\)</span> possible team sizes <span class="math inline">\((1, 2, 3)\)</span>. This gives us <span class="math inline">\(n \times 3 = O(n)\)</span> unique sub-problems. Each sub-problem may iterate through up to <span class="math inline">\(n\)</span> soldiers in the worst case. Therefore, the overall time complexity is <span class="math inline">\(O(n^2)\)</span>.</p>
</li>
<li>
<p>Space complexity: <span class="math inline">\(O(n)\)</span></p>
<p>Each cache (<code>increasingCache</code> and <code>decreasingCache</code>) is a 2D array of size <span class="math inline">\(n \times 4\)</span>, thus taking <span class="math inline">\(O(8 \cdot n) = O(n)\)</span> space.</p>
<p>The maximum depth of recursion is <span class="math inline">\(3\)</span>, so this doesn't add to the asymptotic space complexity.</p>
<p>Thus, the overall space complexity is <span class="math inline">\(O(n)\)</span>.</p>
</li>
</ul>
<hr />
<h3 id="approach-2-dynamic-programming-tabulation">Approach 2: Dynamic Programming (Tabulation)</h3>
<h4 id="intuition-1">Intuition</h4>
<p>The main drawback of using the memoization approach is the significant space consumed by the recursion stack. To address this issue, we can refine the algorithm to reduce space usage by eliminating recursion.</p>
<p>In the memoization approach, the recursive function solves each sub-problem and stores the results in a cache. Since the solution to the main problem is derived from all its sub-problems, the final answer ends up being stored in the cache. Therefore, if we can construct the cache without recursion, we can avoid the overhead associated with the recursion stack.</p>
<p>To achieve this, we’ll use two 2D arrays: <code>increasingTeams</code> and <code>decreasingTeams</code>. Each array will have the position <code>(i, j)</code> representing the number of teams of size <code>j</code> that end with the <code>i</code>th member of the <code>rating</code> array. Initially, we populate these arrays with the base case: for all positions <code>(i, j)</code> where <code>j=1</code>, the number of ways to form a team is <code>1</code>, as the <code>i</code>th soldier alone constitutes a single-member team.</p>
<p>We then use three nested loops to consider all combinations of team lengths 2 and 3. For each position <code>(i, j)</code>, if we can append <code>rating[j]</code> to the sequence ending with <code>rating[i]</code>, we update the count of teams at <code>j</code> by adding the count of teams of the previous length at <code>i</code>.</p>
<p>Finally, to find the total number of teams of length 3, we iterate over both arrays and sum up the counts for all positions where <code>j</code> equals <code>3</code>. This accumulated total represents the number of teams formed, providing the answer to the problem without incurring recursion space overhead.</p>
<h4 id="algorithm-1">Algorithm</h4>
<ul>
<li>Initialize:
<ul>
<li><code>n</code> to the length of <code>rating</code>.</li>
<li><code>teams</code> to store the required number of teams.</li>
</ul>
</li>
<li>Create two 2D arrays <code>increasingTeams</code> and <code>decreasingTeams</code> of size <span class="math inline">\(n \times 4\)</span> to store the count of increasing and decreasing sequences respectively.</li>
<li>Fill base case. For all <code>i</code> from <code>0</code> to <code>n</code>:
<ul>
<li>Set <code>increasingTeams[i][1]</code> and <code>decreasingTeams[i][1]</code> to <code>1</code> (as each soldier forms a sequence of length 1).</li>
</ul>
</li>
<li>Use 3 nested loops to fill the tables. The outer loop iterates over sequence lengths 2 and 3. The middle loop sets the middle soldier. The inner loop iterates over all soldiers as potential end points. For each pair of soldiers <code>i</code> and <code>j</code>:
<ul>
<li>If <code>rating[j] &gt; rating[i]</code>, add <code>increasingTeams[i][count-1]</code> to <code>increasingTeams[j][count]</code>.</li>
<li>If <code>rating[j] &lt; rating[i]</code>, add <code>decreasingTeams[i][count-1]</code> to <code>decreasingTeams[j][count]</code>.</li>
</ul>
</li>
<li>Set <code>teams</code> as the sum of all sequences of length 3.</li>
<li>Return <code>teams</code> as our answer.</li>
</ul>
<h4 id="implementation-1">Implementation</h4>
<p><a href="https://leetcode.com/playground/KX9dQDMV/shared">code</a></p>
<h4 id="complexity-analysis-1">Complexity Analysis</h4>
<p>Let <span class="math inline">\(n\)</span> be the length of the <code>rating</code> array.</p>
<ul>
<li>
<p>Time complexity: <span class="math inline">\(O(n^2)\)</span></p>
<p>Initializing the <code>increasingTeams</code> and <code>decreasingTeams</code> arrays take <span class="math inline">\(O(n)\)</span> time.</p>
<p>In the nested loops: the outer loop runs <span class="math inline">\(2\)</span> times, the middle loop <span class="math inline">\(n\)</span> times and the inner loop at most <span class="math inline">\(n\)</span> times. Thus, the total complexity of the section is <span class="math inline">\(O(2 \cdot n \cdot n)\)</span>, which simplifies to <span class="math inline">\(O(n^2)\)</span>.</p>
<p>The final summation loop runs in linear time.</p>
<p>Thus, the total time complexity of the algorithm is dominated by the nested loops, resulting in <span class="math inline">\(O(n^2)\)</span>.</p>
</li>
<li>
<p>Space complexity: <span class="math inline">\(O(n)\)</span></p>
<p>The two 2D arrays <code>increasingTeams</code> and <code>decreasingTeams</code> each take <span class="math inline">\(n \times 4\)</span> space, which give them a total space complexity of <span class="math inline">\(O(2 \cdot 4 \cdot n) = O(n)\)</span>.</p>
<p>All other elements take constant space, so the space complexity of the algorithm is <span class="math inline">\(O(n)\)</span>.</p>
</li>
</ul>
<hr />
<h3 id="approach-3-dynamic-programming-optimized">Approach 3: Dynamic Programming (Optimized)</h3>
<h4 id="intuition-2">Intuition</h4>
<p>Having explored team formations by fixing either the starting or ending points, let's now consider an alternative approach: focusing on the middle member of each team.</p>
<p>The key insight here is to examine each soldier as a potential middle member. For each such soldier, we need to count:</p>
<ul>
<li>How many soldiers to their left have lower ratings</li>
<li>How many soldiers to their right have higher ratings</li>
</ul>
<p>We apply the same logic for descending teams:</p>
<ul>
<li>How many soldiers to their left have higher ratings</li>
<li>How many soldiers to their right have lower ratings</li>
</ul>
<p>For ascending teams, the number of valid teams for each index is the product of the number of smaller-rated soldiers to the left and larger-rated soldiers to the right. This is because each soldier with a lower rating to the left can be paired with each soldier with a higher rating to the right to form a valid team with the middle soldier.</p>
<p>The same principle applies to descending teams, where we multiply the count of higher-rated soldiers to the left by the count of lower-rated soldiers to the right.</p>
<p>To obtain the final result, we sum the number of teams formed for each potential middle soldier.</p>
<h4 id="algorithm-2">Algorithm</h4>
<ul>
<li>Initialize variables:
<ul>
<li><code>n</code>: length of the <code>rating</code> array.</li>
<li><code>teams</code>: to store the total count of valid teams.</li>
</ul>
</li>
<li>Iterate through <code>rating</code>. For each soldier <code>mid</code>:
<ul>
<li>Set <code>leftSmaller</code> and <code>rightLarger</code> counters to <code>0</code>.</li>
<li>Count smaller rating to the left of <code>mid</code> and store it in <code>leftSmaller</code>.</li>
<li>Count larger rating to the right of <code>mid</code> and store it in <code>rightLarger</code>.</li>
<li>Calculate the number of ascending rating teams:
<ul>
<li>Multiply <code>leftSmaller</code> by <code>rightLarger</code> and add it to <code>teams</code>.</li>
</ul>
</li>
<li>Calculate the number of descending rating teams:
<ul>
<li>Set <code>leftLarger</code> as the total soldiers on left - <code>leftSmaller</code>.</li>
<li>Set <code>rightSmaller</code> as the total soldiers on right - <code>rightLarger</code>.</li>
<li>Multiply <code>leftLarger</code> by <code>rightSmaller</code> and add to <code>teams</code>.</li>
</ul>
</li>
</ul>
</li>
<li>Return <code>teams</code> as our answer.</li>
</ul>
<h4 id="implementation-2">Implementation</h4>
<p><a href="https://leetcode.com/playground/NLpcV6Hw/shared">code</a></p>
<h4 id="complexity-analysis-2">Complexity Analysis</h4>
<p>Let <span class="math inline">\(n\)</span> be the length of the <code>rating</code> array.</p>
<ul>
<li>
<p>Time complexity: <span class="math inline">\(O(n^2)\)</span></p>
<p>The main loop iterates through the <code>rating</code> array, which takes linear time. In each iteration, the two inner loops compare <span class="math inline">\(n-1\)</span> elements in total. Thus, the overall time complexity is <span class="math inline">\(O(n \cdot (n-1))\)</span>, which simplifies to <span class="math inline">\(O(n^2)\)</span>.</p>
</li>
<li>
<p>Space complexity: <span class="math inline">\(O(1)\)</span></p>
<p>The space complexity is constant since no additional data structures dependent on the length of the input space are used.</p>
</li>
</ul>
<hr />
<h3 id="approach-4-binary-indexed-tree-fenwick-tree">Approach 4: Binary Indexed Tree (Fenwick Tree)</h3>
<h4 id="intuition-3">Intuition</h4>
<p>In our previous approach, we performed a linear scan of elements to the left and right of each middle soldier, which contributed an <span class="math inline">\(O(n)\)</span> factor to our overall complexity. To enhance efficiency, we need to explore a more advanced approach.</p>
<p>One such optimization involves querying the total count of smaller soldiers on either side of each soldier. This type of query can be optimized to <span class="math inline">\(O(\log n)\)</span> time using a data structure known as a Binary Indexed Tree (BIT) or Fenwick Tree. While a comprehensive explanation of how a BIT operates is beyond the scope of this article, interested readers can refer to <a href="https://cs.stackexchange.com/questions/10538/bit-what-is-the-intuition-behind-a-binary-indexed-tree-and-how-was-it-thought-a">this discussion</a> for a deeper understanding. For hands-on practice, consider tackling these problems:</p>
<ol>
<li><a href="https://leetcode.com/problems/range-sum-query-mutable/description/">Range Sum Query - Mutable</a></li>
<li><a href="https://leetcode.com/problems/count-of-smaller-numbers-after-self/description/">Count of Smaller Numbers After Self</a></li>
</ol>
<p>Our improved solution utilizes two BITs: one to manage the left side and another for the right side of the current soldier. Each <code>BIT</code> stores frequency counts of ratings within a specific range. For instance, <code>BIT[5]</code> keeps track of the number of soldiers with a rating of <code>5</code>, while <code>BIT[6]</code> aggregates counts for ratings of <code>5</code> and <code>6</code>.</p>
<p>Here is an example to get a better understanding of how the BIT stores the frequency counts of ratings:</p>
<p>!?!../Documents/1395/slideshow.json:1402,922!?!</p>
<p>To implement our algorithm, we start by populating the right <code>BIT</code> with all the soldier ratings. As we process each soldier, we remove their rating from the right <code>BIT</code> and consider them the middle soldier. To count increasing sequences, we query the number of soldiers with lower ratings in the left <code>BIT</code> and the number of soldiers with higher ratings in the right <code>BIT</code>. The product of these two counts gives the total number of increasing teams with the current soldier positioned in the middle. Similarly, we perform this process to calculate the number of decreasing sequence teams. After processing, the current soldier's rating is added to the left <code>BIT</code>, and we continue with the next iteration.</p>
<h4 id="algorithm-3">Algorithm</h4>
<p>Main method <code>numTeams</code>:</p>
<ul>
<li>Set <code>maxRating</code> to the maximum rating in the <code>rating</code> array.</li>
<li>Initialize two binary indexed trees <code>leftBIT</code> and <code>rightBIT</code>, each of size <code>maxRating + 1</code>.</li>
<li>Populate <code>rightBIT</code> with all ratings initially using the <code>updateBIT</code> method.</li>
<li>Initialize <code>teams</code> to <code>0</code> to store the count of valid teams.</li>
<li>Iterate through each <code>rating</code> in the input array:
<ul>
<li>Remove the current <code>rating</code> from <code>rightBIT</code>.</li>
<li>Count <code>smallerRatingsLeft</code> using <code>getPrefixSum</code> on <code>leftBIT</code>.</li>
<li>Count <code>smallerRatingsRight</code> using <code>getPrefixSum</code> on <code>rightBIT</code>.</li>
<li>Set <code>largerRatingsLeft</code> as (all ratings) - (the ratings at and below the current <code>rating</code>) on <code>leftBIT</code>.</li>
<li>Set <code>largerRatingsRight</code> as (all ratings) - (the ratings at or below the current <code>rating</code>) on <code>rightBIT</code>.</li>
<li>Add to <code>teams</code>:
<ul>
<li>Product of <code>smallerRatingsLeft</code> and <code>largerRatingsRight</code> (increasing sequences).</li>
<li>Product of <code>largerRatingsLeft</code> and <code>smallerRatingsRight</code> (decreasing sequences).</li>
</ul>
</li>
<li>Add the current <code>rating</code> to the <code>leftBIT</code>.</li>
</ul>
</li>
<li>Returns <code>teams</code> as the total number of teams possible.</li>
</ul>
<p>Helper method <code>updateBIT</code>:</p>
<ul>
<li>Define a method <code>updateBIT</code> with parameters: <code>BIT</code>, <code>index</code> and <code>value</code>.</li>
<li>While <code>index</code> is within the bounds of <code>BIT</code>:
<ul>
<li>Add the given <code>value</code> to the current <code>index</code>.</li>
<li>Move to the next node in the <code>BIT</code> by adding <code>index &amp; (-index)</code> to <code>index</code>.</li>
</ul>
</li>
</ul>
<p>Helper method <code>getPrefixSum</code>:</p>
<ul>
<li>Define a method <code>getPrefixSum</code> with parameters: <code>BIT</code> and <code>index</code>.</li>
<li>Initialize a variable <code>sum</code> to <code>0</code>.</li>
<li>While <code>index</code> is greater than <code>0</code>:
<ul>
<li>Add the value at the current <code>index</code> in the <code>BIT</code> to <code>sum</code>.</li>
<li>Move to the parent node in the <code>BIT</code> by subtracting <code>index &amp; (-index)</code> from <code>index</code>.</li>
</ul>
</li>
<li>Return <code>sum</code>.</li>
</ul>
<h4 id="implementation-3">Implementation</h4>
<p><a href="https://leetcode.com/playground/iQsDVqjd/shared">code</a></p>
<h4 id="complexity-analysis-3">Complexity Analysis</h4>
<p>Let <span class="math inline">\(n\)</span> be the length of the <code>rating</code> array and <span class="math inline">\(\text{maxRating}\)</span> be the maximum rating in <code>rating</code>.</p>
<ul>
<li>
<p>Time complexity: <span class="math inline">\(O(n \cdot \log(\text{maxRating}))\)</span></p>
<p>Finding <code>maxRating</code> takes linear time.</p>
<p>Initially populating the <code>rightBIT</code> takes <span class="math inline">\(O(n \cdot \log(\text{maxRating}))\)</span> time.</p>
<p>The main loop iterates <span class="math inline">\(n\)</span> times. For each iteration, updating the BIT's have a complexity of <span class="math inline">\(O(\log(\text{maxRating}))\)</span> and getting the prefix sums also take  <span class="math inline">\(O(\log(\text{maxRating}))\)</span> time. Thus, the total for the main loop is <span class="math inline">\(O(n \cdot \log(\text{maxRating}))\)</span>.</p>
<p>Thus, the overall time complexity of the algorithm comes out to be <span class="math inline">\(O(n) + O(2 \cdot n \cdot \log(\text{maxRating}))\)</span>, which simplifies to <span class="math inline">\(O(n \cdot \log(\text{maxRating}))\)</span>.</p>
</li>
<li>
<p>Space complexity: <span class="math inline">\(O(\text{maxRating})\)</span></p>
<p>The only additional space used are the two arrays for the BIT, each taking <span class="math inline">\(O(\text{maxRating})\)</span> space.</p>
<p>This makes the space complexity of the algorithm <span class="math inline">\(O(2 \cdot \text{maxRating}) = O(\text{maxRating})\)</span>.</p>
</li>
</ul>
<hr />
</div>
				</div>
		</div>

<div class="question-card" id="question-7">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/count-of-range-sum/description" target="_blank" rel="noopener noreferrer">Count of Range Sum</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">merge sort</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given an integer array <code>nums</code> and two integers <code>lower</code> and <code>upper</code>, return <em>the number of range sums that lie in</em> <code>[lower, upper]</code> <em>inclusive</em>.</p>

<p>Range sum <code>S(i, j)</code> is defined as the sum of the elements in <code>nums</code> between indices <code>i</code> and <code>j</code> inclusive, where <code>i &lt;= j</code>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [-2,5,-1], lower = -2, upper = 2
<strong>Output:</strong> 3
<strong>Explanation:</strong> The three ranges are: [0,0], [2,2], and [0,2] and their respective sums are: -2, -1, 2.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [0], lower = 0, upper = 0
<strong>Output:</strong> 1
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>-2<sup>31</sup> &lt;= nums[i] &lt;= 2<sup>31</sup> - 1</code></li>
	<li><code>-10<sup>5</sup> &lt;= lower &lt;= upper &lt;= 10<sup>5</sup></code></li>
	<li>The answer is <strong>guaranteed</strong> to fit in a <strong>32-bit</strong> integer.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-8">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/count-of-smaller-numbers-after-self/description" target="_blank" rel="noopener noreferrer">Count of Smaller Numbers After Self</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">merge sort</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given an integer array <code>nums</code>, return<em> an integer array </em><code>counts</code><em> where </em><code>counts[i]</code><em> is the number of smaller elements to the right of </em><code>nums[i]</code>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [5,2,6,1]
<strong>Output:</strong> [2,1,1,0]
<strong>Explanation:</strong>
To the right of 5 there are <b>2</b> smaller elements (2 and 1).
To the right of 2 there is only <b>1</b> smaller element (1).
To the right of 6 there is <b>1</b> smaller element (1).
To the right of 1 there is <b>0</b> smaller element.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [-1]
<strong>Output:</strong> [0]
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> nums = [-1,-1]
<strong>Output:</strong> [0,0]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>-10<sup>4</sup> &lt;= nums[i] &lt;= 10<sup>4</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-9">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/create-sorted-array-through-instructions/description" target="_blank" rel="noopener noreferrer">Create Sorted Array through Instructions</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">merge sort</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given an integer array <code>instructions</code>, you are asked to create a sorted array from the elements in <code>instructions</code>. You start with an empty container <code>nums</code>. For each element from <strong>left to right</strong> in <code>instructions</code>, insert it into <code>nums</code>. The <strong>cost</strong> of each insertion is the <b>minimum</b> of the following:</p>

<ul>
	<li>The number of elements currently in <code>nums</code> that are <strong>strictly less than</strong> <code>instructions[i]</code>.</li>
	<li>The number of elements currently in <code>nums</code> that are <strong>strictly greater than</strong> <code>instructions[i]</code>.</li>
</ul>

<p>For example, if inserting element <code>3</code> into <code>nums = [1,2,3,5]</code>, the <strong>cost</strong> of insertion is <code>min(2, 1)</code> (elements <code>1</code> and <code>2</code> are less than <code>3</code>, element <code>5</code> is greater than <code>3</code>) and <code>nums</code> will become <code>[1,2,3,3,5]</code>.</p>

<p>Return <em>the <strong>total cost</strong> to insert all elements from </em><code>instructions</code><em> into </em><code>nums</code>. Since the answer may be large, return it <strong>modulo</strong> <code>10<sup>9</sup> + 7</code></p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> instructions = [1,5,6,2]
<strong>Output:</strong> 1
<strong>Explanation:</strong> Begin with nums = [].
Insert 1 with cost min(0, 0) = 0, now nums = [1].
Insert 5 with cost min(1, 0) = 0, now nums = [1,5].
Insert 6 with cost min(2, 0) = 0, now nums = [1,5,6].
Insert 2 with cost min(1, 2) = 1, now nums = [1,2,5,6].
The total cost is 0 + 0 + 0 + 1 = 1.</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> instructions = [1,2,3,6,5,4]
<strong>Output:</strong> 3
<strong>Explanation:</strong> Begin with nums = [].
Insert 1 with cost min(0, 0) = 0, now nums = [1].
Insert 2 with cost min(1, 0) = 0, now nums = [1,2].
Insert 3 with cost min(2, 0) = 0, now nums = [1,2,3].
Insert 6 with cost min(3, 0) = 0, now nums = [1,2,3,6].
Insert 5 with cost min(3, 1) = 1, now nums = [1,2,3,5,6].
Insert 4 with cost min(3, 2) = 2, now nums = [1,2,3,4,5,6].
The total cost is 0 + 0 + 0 + 0 + 1 + 2 = 3.
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> instructions = [1,3,3,3,2,4,2,1,2]
<strong>Output:</strong> 4
<strong>Explanation:</strong> Begin with nums = [].
Insert 1 with cost min(0, 0) = 0, now nums = [1].
Insert 3 with cost min(1, 0) = 0, now nums = [1,3].
Insert 3 with cost min(1, 0) = 0, now nums = [1,3,3].
Insert 3 with cost min(1, 0) = 0, now nums = [1,3,3,3].
Insert 2 with cost min(1, 3) = 1, now nums = [1,2,3,3,3].
Insert 4 with cost min(5, 0) = 0, now nums = [1,2,3,3,3,4].
​​​​​​​Insert 2 with cost min(1, 4) = 1, now nums = [1,2,2,3,3,3,4].
​​​​​​​Insert 1 with cost min(0, 6) = 0, now nums = [1,1,2,2,3,3,3,4].
​​​​​​​Insert 2 with cost min(2, 4) = 2, now nums = [1,1,2,2,2,3,3,3,4].
The total cost is 0 + 0 + 0 + 0 + 1 + 0 + 1 + 0 + 2 = 4.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= instructions.length &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= instructions[i] &lt;= 10<sup>5</sup></code></li>
</ul></div>
			</div>
			
			
		</div>

<div class="question-card" id="question-10">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/distribute-elements-into-two-arrays-ii/description" target="_blank" rel="noopener noreferrer">Distribute Elements Into Two Arrays II</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">simulation</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a <strong>1-indexed</strong> array of integers <code>nums</code> of length <code>n</code>.</p>

<p>We define a function <code>greaterCount</code> such that <code>greaterCount(arr, val)</code> returns the number of elements in <code>arr</code> that are <strong>strictly greater</strong> than <code>val</code>.</p>

<p>You need to distribute all the elements of <code>nums</code> between two arrays <code>arr1</code> and <code>arr2</code> using <code>n</code> operations. In the first operation, append <code>nums[1]</code> to <code>arr1</code>. In the second operation, append <code>nums[2]</code> to <code>arr2</code>. Afterwards, in the <code>i<sup>th</sup></code> operation:</p>

<ul>
	<li>If <code>greaterCount(arr1, nums[i]) &gt; greaterCount(arr2, nums[i])</code>, append <code>nums[i]</code> to <code>arr1</code>.</li>
	<li>If <code>greaterCount(arr1, nums[i]) &lt; greaterCount(arr2, nums[i])</code>, append <code>nums[i]</code> to <code>arr2</code>.</li>
	<li>If <code>greaterCount(arr1, nums[i]) == greaterCount(arr2, nums[i])</code>, append <code>nums[i]</code> to the array with a <strong>lesser</strong> number of elements.</li>
	<li>If there is still a tie, append <code>nums[i]</code> to <code>arr1</code>.</li>
</ul>

<p>The array <code>result</code> is formed by concatenating the arrays <code>arr1</code> and <code>arr2</code>. For example, if <code>arr1 == [1,2,3]</code> and <code>arr2 == [4,5,6]</code>, then <code>result = [1,2,3,4,5,6]</code>.</p>

<p>Return <em>the integer array</em> <code>result</code>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [2,1,3,3]
<strong>Output:</strong> [2,3,1,3]
<strong>Explanation:</strong> After the first 2 operations, arr1 = [2] and arr2 = [1].
In the 3<sup>rd</sup> operation, the number of elements greater than 3 is zero in both arrays. Also, the lengths are equal, hence, append nums[3] to arr1.
In the 4<sup>th</sup> operation, the number of elements greater than 3 is zero in both arrays. As the length of arr2 is lesser, hence, append nums[4] to arr2.
After 4 operations, arr1 = [2,3] and arr2 = [1,3].
Hence, the array result formed by concatenation is [2,3,1,3].
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [5,14,3,1,2]
<strong>Output:</strong> [5,3,1,2,14]
<strong>Explanation:</strong> After the first 2 operations, arr1 = [5] and arr2 = [14].
In the 3<sup>rd</sup> operation, the number of elements greater than 3 is one in both arrays. Also, the lengths are equal, hence, append nums[3] to arr1.
In the 4<sup>th</sup> operation, the number of elements greater than 1 is greater in arr1 than arr2 (2 &gt; 1). Hence, append nums[4] to arr1.
In the 5<sup>th</sup> operation, the number of elements greater than 2 is greater in arr1 than arr2 (2 &gt; 1). Hence, append nums[5] to arr1.
After 5 operations, arr1 = [5,3,1,2] and arr2 = [14].
Hence, the array result formed by concatenation is [5,3,1,2,14].
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> nums = [3,3,3,3]
<strong>Output:</strong> [3,3,3,3]
<strong>Explanation:</strong> At the end of 4 operations, arr1 = [3,3] and arr2 = [3,3].
Hence, the array result formed by concatenation is [3,3,3,3].
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>3 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-11">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/find-building-where-alice-and-bob-can-meet/description" target="_blank" rel="noopener noreferrer">Find Building Where Alice and Bob Can Meet</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						<span class="availability-badge solution">Solution</span>
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">monotonic stack</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">stack</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a <strong>0-indexed</strong> array <code>heights</code> of positive integers, where <code>heights[i]</code> represents the height of the <code>i<sup>th</sup></code> building.</p>

<p>If a person is in building <code>i</code>, they can move to any other building <code>j</code> if and only if <code>i &lt; j</code> and <code>heights[i] &lt; heights[j]</code>.</p>

<p>You are also given another array <code>queries</code> where <code>queries[i] = [a<sub>i</sub>, b<sub>i</sub>]</code>. On the <code>i<sup>th</sup></code> query, Alice is in building <code>a<sub>i</sub></code> while Bob is in building <code>b<sub>i</sub></code>.</p>

<p>Return <em>an array</em> <code>ans</code> <em>where</em> <code>ans[i]</code> <em>is <strong>the index of the leftmost building</strong> where Alice and Bob can meet on the</em> <code>i<sup>th</sup></code> <em>query</em>. <em>If Alice and Bob cannot move to a common building on query</em> <code>i</code>, <em>set</em> <code>ans[i]</code> <em>to</em> <code>-1</code>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> heights = [6,4,8,5,2,7], queries = [[0,1],[0,3],[2,4],[3,4],[2,2]]
<strong>Output:</strong> [2,5,-1,5,2]
<strong>Explanation:</strong> In the first query, Alice and Bob can move to building 2 since heights[0] &lt; heights[2] and heights[1] &lt; heights[2]. 
In the second query, Alice and Bob can move to building 5 since heights[0] &lt; heights[5] and heights[3] &lt; heights[5]. 
In the third query, Alice cannot meet Bob since Alice cannot move to any other building.
In the fourth query, Alice and Bob can move to building 5 since heights[3] &lt; heights[5] and heights[4] &lt; heights[5].
In the fifth query, Alice and Bob are already in the same building.  
For ans[i] != -1, It can be shown that ans[i] is the leftmost building where Alice and Bob can meet.
For ans[i] == -1, It can be shown that there is no building where Alice and Bob can meet.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> heights = [5,3,8,2,6,1,4,6], queries = [[0,7],[3,5],[5,2],[3,0],[1,6]]
<strong>Output:</strong> [7,6,-1,4,6]
<strong>Explanation:</strong> In the first query, Alice can directly move to Bob&#39;s building since heights[0] &lt; heights[7].
In the second query, Alice and Bob can move to building 6 since heights[3] &lt; heights[6] and heights[5] &lt; heights[6].
In the third query, Alice cannot meet Bob since Bob cannot move to any other building.
In the fourth query, Alice and Bob can move to building 4 since heights[3] &lt; heights[4] and heights[0] &lt; heights[4].
In the fifth query, Alice can directly move to Bob&#39;s building since heights[1] &lt; heights[6].
For ans[i] != -1, It can be shown that ans[i] is the leftmost building where Alice and Bob can meet.
For ans[i] == -1, It can be shown that there is no building where Alice and Bob can meet.

</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= heights.length &lt;= 5 * 10<sup>4</sup></code></li>
	<li><code>1 &lt;= heights[i] &lt;= 10<sup>9</sup></code></li>
	<li><code>1 &lt;= queries.length &lt;= 5 * 10<sup>4</sup></code></li>
	<li><code>queries[i] = [a<sub>i</sub>, b<sub>i</sub>]</code></li>
	<li><code>0 &lt;= a<sub>i</sub>, b<sub>i</sub> &lt;= heights.length - 1</code></li>
</ul>
</div>
			</div>
			
			<div class="solution-section">
					<h3>Solution</h3>
					<div class="content-section"><p>[TOC]</p>
<h2 id="solution">Solution</h2>
<hr />
<h3 id="overview">Overview</h3>
<p>We are given an integer array <code>heights</code> and an array of pairs <code>queries</code>, where each pair is of the form <span class="math inline">\([a_i, b_i]\)</span>, representing the positions of Alice and Bob at indices <code>i</code> and <code>j</code>, respectively. For each query, the task is to find the closest value to the right in the <code>heights</code> array that is greater than the <code>heights</code> at both the given positions.</p>
<p>In other words, given indices <code>i</code> and <code>j</code>, we need to find the first value in the <code>heights</code> array that is greater than the values at <code>heights[i]</code> and <code>heights[j]</code>. If no such value exists, return -1.</p>
<hr />
<h3 id="approach-1-monotonic-stack">Approach 1: Monotonic Stack</h3>
<h4 id="intuition">Intuition</h4>
<p>Let’s start by breaking down the problem into simpler terms. Suppose <code>queries</code> only contained single integer indices. The goal would then be to find, for each index, the first building to the right in the <code>heights</code> array that is taller than the building at that index. Instead of scanning the array repeatedly for each query, we can preprocess the <code>heights</code> array to store this &quot;next taller building&quot; information in advance.</p>
<p>The key insight here is that for each building, the next taller building to its right depends only on the heights of the buildings that come after it. Using a monotonic stack, we can compute this efficiently. By traversing the <code>heights</code> array from right to left, we maintain a stack of indices in decreasing order of heights. For the current building, any shorter or equal buildings already in the stack cannot be the answer, so we remove them. If the stack is not empty, the top element gives the position of the next taller building. If the stack is empty, it means no taller building exists to the right, so we store <code>-1</code>. This preprocessing step allows us to handle single queries in constant time. For a better understanding of this idea, you can refer to <a href="https://leetcode.com/problems/next-greater-element-ii/">Next Greater Element - II</a>, which applies a similar technique.</p>
<p>Now, let’s extend this idea to handle queries that are pairs of values. In this scenario, the task is to find the first height to the right in the <code>heights</code> array that is greater than both values in each pair. Here the key realization is that the answer for a pair depends on the larger of the two values since a building must be taller than both. This simplifies the problem by reducing it to a comparison with a single threshold for each query.</p>
<p>While traversing the <code>heights</code> array, we use a monotonic stack to maintain all elements greater than the current height, with the nearest greater height at the top of the stack. When processing a query, the stack already contains all elements greater than the current height.</p>
<p>For each query pair, we use binary search on the stack to quickly find the first element greater than the larger value in the pair. This ensures that each query is processed in <span class="math inline">\(O(\log n)\)</span> time.</p>
<h4 id="algorithm">Algorithm</h4>
<p>Main function - <code>leftmostBuildingQueries(heights, queries)</code></p>
<ol>
<li>Create a list <code>newQueries</code> where each index stores the list of queries that require this index as the maximum index of the query pair. Each query is stored as a pair containing the required height (<code>heights[a]</code>) and the query index.</li>
<li>Initialize a monotonic stack <code>monoStack</code> to keep track of building heights and their indices in decreasing order of height while iterating from right to left in the <code>heights</code> array.</li>
<li>Initialize an array <code>result</code> to store the answers for each query, with all elements initially set to <code>-1</code>.</li>
<li>Iterate over the <code>queries</code>:
<ul>
<li>For each query, extract the two indices <code>a</code> and <code>b</code>.</li>
<li>If <code>a &gt; b</code>, swap the indices to ensure <code>a &lt;= b</code>.</li>
<li>If <code>heights[b] &gt; heights[a]</code> or <code>a == b</code>, set <code>result[currQuery] = b</code>.</li>
<li>Otherwise, add the query to <code>newQueries[b]</code> with its required height (<code>heights[a]</code>) and the query index.</li>
</ul>
</li>
<li>Iterate over the indices of the <code>heights</code> array from right to left:
<ul>
<li>For each query stored at the current index in <code>newQueries</code>, use binary search on the <code>monoStack</code> to find the first building with a height greater than the query's required height. If such a building exists, set the result for the query to the index of this building.</li>
<li>Remove all elements from the top of the <code>monoStack</code> where the height is less than or equal to the current height, as they are no longer relevant.</li>
<li>Push the current height and index onto the <code>monoStack</code>.</li>
</ul>
</li>
<li>Return the <code>result</code> array.</li>
</ol>
<p>Helper Binary Search function - <code>search(height, monoStack)</code></p>
<ol>
<li>Initialize two pointers <code>left = 0</code> and <code>right = size of monoStack - 1</code>. Set a variable <code>ans = -1</code> to store the search result.</li>
<li>Perform a binary search:
<ul>
<li>Calculate <code>mid = (left + right) / 2</code>.</li>
<li>If the height at <code>monoStack[mid]</code> is greater than the required height:
<ul>
<li>Update <code>ans = max(ans, mid)</code> and set <code>left = mid + 1</code>.</li>
</ul>
</li>
<li>Otherwise, set <code>right = mid - 1</code>.</li>
</ul>
</li>
<li>Return <code>ans</code>, which will be the index of the first building with a height greater than the required height. If no such building exists, <code>ans</code> remains <code>-1</code>.</li>
</ol>
<h4 id="implementation">Implementation</h4>
<p><a href="https://leetcode.com/playground/AFfMGimL/shared">code</a></p>
<h4 id="complexity-analysis">Complexity Analysis</h4>
<p>Let <span class="math inline">\(n\)</span> be the size of the array <code>heights</code> and <span class="math inline">\(q\)</span> be the number of queries in the <code>queries</code> array.</p>
<ul>
<li>
<p>Time Complexity: <span class="math inline">\(O(q \cdot \log n + n)\)</span></p>
<p>The algorithm  processes each query using binary search on the monotonic stack, which takes <span class="math inline">\(O(\log n)\)</span> per query. With <span class="math inline">\(q\)</span> queries, the total query processing time is <span class="math inline">\(O(q \cdot \log n)\)</span>. Apart from this, we also iterate through the <code>heights</code> and <code>queries</code> arrays, that takes <span class="math inline">\(O(n)\)</span> and <span class="math inline">\(O(q)\)</span> time, respectively.</p>
<p>Therefore, the overall time complexity is <span class="math inline">\(O(q \cdot \log n + n)\)</span>.</p>
</li>
<li>
<p>Space Complexity: <span class="math inline">\(O(n + q)\)</span></p>
<p>The algorithm uses a monotonic stack to store building indices, requiring <span class="math inline">\(O(n)\)</span> space. It also stores queries in the <code>newQueries</code> array and results in the <code>result</code> array, each taking <span class="math inline">\(O(q)\)</span> space.</p>
<p>Therefore, the total space complexity is <span class="math inline">\(O(n + q)\)</span>.</p>
</li>
</ul>
<hr />
<h3 id="approach-2-priority-queue">Approach 2: Priority Queue</h3>
<h4 id="intuition-1">Intuition</h4>
<p>In the previous approach, we calculated the answer using a monotonic stack. Each query asks for the closest index to the right with a value greater than both elements in the query pair. Instead of processing each query one at a time, we can optimize by checking, for each index in the <code>heights</code> array, if it can serve as the answer for any query.</p>
<p>To do this efficiently, we can iterate through the <code>heights</code> array from left to right. For each index, we look for query pairs where both indices are smaller than the current index, and both values in the pair are smaller than the value at the current index. To make this process faster, we prioritize assigning answers to the smallest query pairs first.</p>
<p>By maintaining the query pairs sorted based on their maximum value and index up to the current position, we can process them more efficiently.</p>
<p>To implement this idea, we process the <code>heights</code> array while managing the queries by storing them in a 2D array of arrays, where each subarray holds the queries for the corresponding building.</p>
<p>We begin by sorting and mapping the queries to track the index and values that we need. Using a priority queue, we store queries based on their maximum value and index. This helps us quickly retrieve the smallest index for processing.</p>
<p>As we move through the <code>heights</code> array, we pop the queries from the queue. For each query, if the current index is greater than both indices of the query, we assign the current index as the answer and store it. We also check if new queries, whose maximum index matches the current one, should be added to the queue for future processing.</p>
<p>This allows us to handle queries without reprocessing them repeatedly.</p>
<h4 id="algorithm-1">Algorithm</h4>
<ul>
<li>
<p>Initialize <code>storeQueries</code> as a 2D array of arrays to store queries for each building.</p>
</li>
<li>
<p>Initialize <code>maxIndex</code> as a priority queue to track the queries that need to be answered based on building heights.</p>
</li>
<li>
<p>Initialize <code>result</code> as an array of <code>-1</code> to store the answers for each query.</p>
</li>
<li>
<p>Loop through each query:</p>
<ul>
<li>For each query <code>(a, b)</code>:
<ul>
<li>If the height of building <code>a</code> is less than building <code>b</code> and <code>a</code> is smaller than <code>b</code>, set <code>result[currQuery]</code> to <code>b</code> (building <code>b</code> is the answer).</li>
<li>If the height of building <code>a</code> is greater than building <code>b</code> and <code>a</code> is greater than <code>b</code>, set <code>result[currQuery]</code> to <code>a</code> (building <code>a</code> is the answer).</li>
<li>If <code>a</code> is equal to <code>b</code>, set <code>result[currQuery]</code> to <code>a</code> (both are the same building).</li>
<li>Otherwise, store the query in <code>storeQueries[max(a, b)]</code> for future processing.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Loop through each building index <code>index</code>:</p>
<ul>
<li>While the priority queue <code>maxIndex</code> has elements and the minimum value in <code>maxIndex</code> is smaller than the current building height:
<ul>
<li>Set the corresponding query's result in <code>result</code> and pop the element from <code>maxIndex</code> (this query is answered).</li>
</ul>
</li>
<li>Push new queries from <code>storeQueries[index]</code> into <code>maxIndex</code>, sorting them by height.</li>
</ul>
</li>
<li>
<p>Return the <code>result</code> array containing the answers to all queries.</p>
</li>
</ul>
<h4 id="implementation-1">Implementation</h4>
<p><a href="https://leetcode.com/playground/gobEvzsi/shared">code</a></p>
<h4 id="complexity-analysis-1">Complexity Analysis</h4>
<p>Let <span class="math inline">\(n\)</span> be the size of the array <code>heights</code> and <span class="math inline">\(q\)</span> be the number of queries in the <code>queries</code> array.</p>
<ul>
<li>
<p>Time Complexity: <span class="math inline">\(O(q \cdot \log q + n)\)</span></p>
<p>The algorithm first iterates over the <code>queries</code> array to map the maximum indices and heights in <code>storeQueries</code>, taking <span class="math inline">\(O(q)\)</span> time. It then processes each index in the <code>heights</code> array, updating results via a priority queue. Insertion and deletion operations in the priority queue take <span class="math inline">\(O(\log q)\)</span> each, with at most <span class="math inline">\(q\)</span> queries processed. For each index, the algorithm checks and pushes relevant queries from <code>storeQueries</code>, resulting in an overall <span class="math inline">\(O(n)\)</span> time for all iterations.</p>
<p>Thus, the overall time complexity is <span class="math inline">\(O(q \cdot \log q + n)\)</span>.</p>
</li>
<li>
<p>Space Complexity: <span class="math inline">\(O(n + q)\)</span></p>
<p>The algorithm uses a array <code>storeQueries</code> to store query mappings, which requires <span class="math inline">\(O(n)\)</span> space, as each element corresponds to an index in <code>heights</code>. Additionally, a priority queue <code>maxIndex</code> is used to handle queries, which at most can store <span class="math inline">\(O(q)\)</span> elements. The <code>result</code> array also requires <span class="math inline">\(O(q)\)</span> space to store the answers.</p>
<p>Therefore, the total space complexity is <span class="math inline">\(O(n + q)\)</span>.</p>
</li>
</ul>
<hr />
</div>
				</div>
		</div>

<div class="question-card" id="question-12">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/find-the-longest-valid-obstacle-course-at-each-position/description" target="_blank" rel="noopener noreferrer">Find the Longest Valid Obstacle Course at Each Position</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You want to build some obstacle courses. You are given a <strong>0-indexed</strong> integer array <code>obstacles</code> of length <code>n</code>, where <code>obstacles[i]</code> describes the height of the <code>i<sup>th</sup></code> obstacle.</p>

<p>For every index <code>i</code> between <code>0</code> and <code>n - 1</code> (<strong>inclusive</strong>), find the length of the <strong>longest obstacle course</strong> in <code>obstacles</code> such that:</p>

<ul>
	<li>You choose any number of obstacles between <code>0</code> and <code>i</code> <strong>inclusive</strong>.</li>
	<li>You must include the <code>i<sup>th</sup></code> obstacle in the course.</li>
	<li>You must put the chosen obstacles in the <strong>same order</strong> as they appear in <code>obstacles</code>.</li>
	<li>Every obstacle (except the first) is <strong>taller</strong> than or the <strong>same height</strong> as the obstacle immediately before it.</li>
</ul>

<p>Return <em>an array</em> <code>ans</code> <em>of length</em> <code>n</code>, <em>where</em> <code>ans[i]</code> <em>is the length of the <strong>longest obstacle course</strong> for index</em> <code>i</code><em> as described above</em>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> obstacles = [1,2,3,2]
<strong>Output:</strong> [1,2,3,3]
<strong>Explanation:</strong> The longest valid obstacle course at each position is:
- i = 0: [<u>1</u>], [1] has length 1.
- i = 1: [<u>1</u>,<u>2</u>], [1,2] has length 2.
- i = 2: [<u>1</u>,<u>2</u>,<u>3</u>], [1,2,3] has length 3.
- i = 3: [<u>1</u>,<u>2</u>,3,<u>2</u>], [1,2,2] has length 3.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> obstacles = [2,2,1]
<strong>Output:</strong> [1,2,1]
<strong>Explanation: </strong>The longest valid obstacle course at each position is:
- i = 0: [<u>2</u>], [2] has length 1.
- i = 1: [<u>2</u>,<u>2</u>], [2,2] has length 2.
- i = 2: [2,2,<u>1</u>], [1] has length 1.
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> obstacles = [3,1,5,6,4,2]
<strong>Output:</strong> [1,1,2,3,2,2]
<strong>Explanation:</strong> The longest valid obstacle course at each position is:
- i = 0: [<u>3</u>], [3] has length 1.
- i = 1: [3,<u>1</u>], [1] has length 1.
- i = 2: [<u>3</u>,1,<u>5</u>], [3,5] has length 2. [1,5] is also valid.
- i = 3: [<u>3</u>,1,<u>5</u>,<u>6</u>], [3,5,6] has length 3. [1,5,6] is also valid.
- i = 4: [<u>3</u>,1,5,6,<u>4</u>], [3,4] has length 2. [1,4] is also valid.
- i = 5: [3,<u>1</u>,5,6,4,<u>2</u>], [1,2] has length 2.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>n == obstacles.length</code></li>
	<li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= obstacles[i] &lt;= 10<sup>7</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-13">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/longest-increasing-subsequence-ii/description" target="_blank" rel="noopener noreferrer">Longest Increasing Subsequence II</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">monotonic queue</span> <span class="topic-badge">queue</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given an integer array <code>nums</code> and an integer <code>k</code>.</p>

<p>Find the longest subsequence of <code>nums</code> that meets the following requirements:</p>

<ul>
	<li>The subsequence is <strong>strictly increasing</strong> and</li>
	<li>The difference between adjacent elements in the subsequence is <strong>at most</strong> <code>k</code>.</li>
</ul>

<p>Return<em> the length of the <strong>longest</strong> <strong>subsequence</strong> that meets the requirements.</em></p>

<p>A <strong>subsequence</strong> is an array that can be derived from another array by deleting some or no elements without changing the order of the remaining elements.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [4,2,1,4,3,4,5,8,15], k = 3
<strong>Output:</strong> 5
<strong>Explanation:</strong>
The longest subsequence that meets the requirements is [1,3,4,5,8].
The subsequence has a length of 5, so we return 5.
Note that the subsequence [1,3,4,5,8,15] does not meet the requirements because 15 - 8 = 7 is larger than 3.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [7,4,5,1,8,12,4,7], k = 5
<strong>Output:</strong> 4
<strong>Explanation:</strong>
The longest subsequence that meets the requirements is [4,5,8,12].
The subsequence has a length of 4, so we return 4.
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,5], k = 1
<strong>Output:</strong> 1
<strong>Explanation:</strong>
The longest subsequence that meets the requirements is [1].
The subsequence has a length of 1, so we return 1.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= nums[i], k &lt;= 10<sup>5</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-14">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/longest-uploaded-prefix/description" target="_blank" rel="noopener noreferrer">Longest Uploaded Prefix</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">design</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">union find</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a stream of <code>n</code> videos, each represented by a <strong>distinct</strong> number from <code>1</code> to <code>n</code> that you need to &quot;upload&quot; to a server. You need to implement a data structure that calculates the length of the <strong>longest uploaded prefix</strong> at various points in the upload process.</p>

<p>We consider <code>i</code> to be an uploaded prefix if all videos in the range <code>1</code> to <code>i</code> (<strong>inclusive</strong>) have been uploaded to the server. The longest uploaded prefix is the <strong>maximum </strong>value of <code>i</code> that satisfies this definition.<br />
<br />
Implement the <code>LUPrefix </code>class:</p>

<ul>
	<li><code>LUPrefix(int n)</code> Initializes the object for a stream of <code>n</code> videos.</li>
	<li><code>void upload(int video)</code> Uploads <code>video</code> to the server.</li>
	<li><code>int longest()</code> Returns the length of the <strong>longest uploaded prefix</strong> defined above.</li>
</ul>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input</strong>
[&quot;LUPrefix&quot;, &quot;upload&quot;, &quot;longest&quot;, &quot;upload&quot;, &quot;longest&quot;, &quot;upload&quot;, &quot;longest&quot;]
[[4], [3], [], [1], [], [2], []]
<strong>Output</strong>
[null, null, 0, null, 1, null, 3]

<strong>Explanation</strong>
LUPrefix server = new LUPrefix(4);   // Initialize a stream of 4 videos.
server.upload(3);                    // Upload video 3.
server.longest();                    // Since video 1 has not been uploaded yet, there is no prefix.
                                     // So, we return 0.
server.upload(1);                    // Upload video 1.
server.longest();                    // The prefix [1] is the longest uploaded prefix, so we return 1.
server.upload(2);                    // Upload video 2.
server.longest();                    // The prefix [1,2,3] is the longest uploaded prefix, so we return 3.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= video &lt;= n</code></li>
	<li>All values of <code>video</code> are <strong>distinct</strong>.</li>
	<li>At most <code>2 * 10<sup>5</sup></code> calls <strong>in total</strong> will be made to <code>upload</code> and <code>longest</code>.</li>
	<li>At least one call will be made to <code>longest</code>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-15">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/make-array-empty/description" target="_blank" rel="noopener noreferrer">Make Array Empty</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">greedy</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">sorting</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given an integer array <code>nums</code> containing <strong>distinct</strong> numbers, and you can perform the following operations <strong>until the array is empty</strong>:</p>

<ul>
	<li>If the first element has the <strong>smallest</strong> value, remove it</li>
	<li>Otherwise, put the first element at the <strong>end</strong> of the array.</li>
</ul>

<p>Return <em>an integer denoting the number of operations it takes to make </em><code>nums</code><em> empty.</em></p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [3,4,-1]
<strong>Output:</strong> 5
</pre>

<table style="border: 2px solid black; border-collapse: collapse;">
	<thead>
		<tr>
			<th style="border: 2px solid black; padding: 5px;">Operation</th>
			<th style="border: 2px solid black; padding: 5px;">Array</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">1</td>
			<td style="border: 2px solid black; padding: 5px;">[4, -1, 3]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">2</td>
			<td style="border: 2px solid black; padding: 5px;">[-1, 3, 4]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">3</td>
			<td style="border: 2px solid black; padding: 5px;">[3, 4]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">4</td>
			<td style="border: 2px solid black; padding: 5px;">[4]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">5</td>
			<td style="border: 2px solid black; padding: 5px;">[]</td>
		</tr>
	</tbody>
</table>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,2,4,3]
<strong>Output:</strong> 5
</pre>

<table style="border: 2px solid black; border-collapse: collapse;">
	<thead>
		<tr>
			<th style="border: 2px solid black; padding: 5px;">Operation</th>
			<th style="border: 2px solid black; padding: 5px;">Array</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">1</td>
			<td style="border: 2px solid black; padding: 5px;">[2, 4, 3]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">2</td>
			<td style="border: 2px solid black; padding: 5px;">[4, 3]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">3</td>
			<td style="border: 2px solid black; padding: 5px;">[3, 4]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">4</td>
			<td style="border: 2px solid black; padding: 5px;">[4]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">5</td>
			<td style="border: 2px solid black; padding: 5px;">[]</td>
		</tr>
	</tbody>
</table>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,2,3]
<strong>Output:</strong> 3
</pre>

<table style="border: 2px solid black; border-collapse: collapse;">
	<thead>
		<tr>
			<th style="border: 2px solid black; padding: 5px;">Operation</th>
			<th style="border: 2px solid black; padding: 5px;">Array</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">1</td>
			<td style="border: 2px solid black; padding: 5px;">[2, 3]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">2</td>
			<td style="border: 2px solid black; padding: 5px;">[3]</td>
		</tr>
		<tr>
			<td style="border: 2px solid black; padding: 5px;">3</td>
			<td style="border: 2px solid black; padding: 5px;">[]</td>
		</tr>
	</tbody>
</table>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>-10<sup>9&nbsp;</sup>&lt;= nums[i] &lt;= 10<sup>9</sup></code></li>
	<li>All values in <code>nums</code> are <strong>distinct</strong>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-16">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/maximum-area-rectangle-with-point-constraints-i/description" target="_blank" rel="noopener noreferrer">Maximum Area Rectangle With Point Constraints I</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">enumeration</span> <span class="topic-badge">geometry</span> <span class="topic-badge">math</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">sorting</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given an array <code>points</code> where <code>points[i] = [x<sub>i</sub>, y<sub>i</sub>]</code> represents the coordinates of a point on an infinite plane.</p>

<p>Your task is to find the <strong>maximum </strong>area of a rectangle that:</p>

<ul>
	<li>Can be formed using <strong>four</strong> of these points as its corners.</li>
	<li>Does <strong>not</strong> contain any other point inside or on its border.</li>
	<li>Has its edges&nbsp;<strong>parallel</strong> to the axes.</li>
</ul>

<p>Return the <strong>maximum area</strong> that you can obtain or -1 if no such rectangle is possible.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">points = [[1,1],[1,3],[3,1],[3,3]]</span></p>

<p><strong>Output: </strong>4</p>

<p><strong>Explanation:</strong></p>

<p><strong class="example"><img alt="Example 1 diagram" src="https://assets.leetcode.com/uploads/2024/11/02/example1.png" style="width: 229px; height: 228px;" /></strong></p>

<p>We can make a rectangle with these 4 points as corners and there is no other point that lies inside or on the border<!-- notionvc: f270d0a3-a596-4ed6-9997-2c7416b2b4ee -->. Hence, the maximum possible area would be 4.</p>
</div>

<p><strong class="example">Example 2:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">points = [[1,1],[1,3],[3,1],[3,3],[2,2]]</span></p>

<p><strong>Output:</strong><b> </b>-1</p>

<p><strong>Explanation:</strong></p>

<p><strong class="example"><img alt="Example 2 diagram" src="https://assets.leetcode.com/uploads/2024/11/02/example2.png" style="width: 229px; height: 228px;" /></strong></p>

<p>There is only one rectangle possible is with points <code>[1,1], [1,3], [3,1]</code> and <code>[3,3]</code> but <code>[2,2]</code> will always lie inside it. Hence, returning -1.</p>
</div>

<p><strong class="example">Example 3:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">points = [[1,1],[1,3],[3,1],[3,3],[1,2],[3,2]]</span></p>

<p><strong>Output: </strong>2</p>

<p><strong>Explanation:</strong></p>

<p><strong class="example"><img alt="Example 3 diagram" src="https://assets.leetcode.com/uploads/2024/11/02/example3.png" style="width: 229px; height: 228px;" /></strong></p>

<p>The maximum area rectangle is formed by the points <code>[1,3], [1,2], [3,2], [3,3]</code>, which has an area of 2. Additionally, the points <code>[1,1], [1,2], [3,1], [3,2]</code> also form a valid rectangle with the same area.</p>
</div>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= points.length &lt;= 10</code></li>
	<li><code>points[i].length == 2</code></li>
	<li><code>0 &lt;= x<sub>i</sub>, y<sub>i</sub> &lt;= 100</code></li>
	<li>All the given points are <strong>unique</strong>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-17">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/maximum-area-rectangle-with-point-constraints-ii/description" target="_blank" rel="noopener noreferrer">Maximum Area Rectangle With Point Constraints II</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">geometry</span> <span class="topic-badge">math</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">sorting</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>There are n points on an infinite plane. You are given two integer arrays <code>xCoord</code> and <code>yCoord</code> where <code>(xCoord[i], yCoord[i])</code> represents the coordinates of the <code>i<sup>th</sup></code> point.</p>

<p>Your task is to find the <strong>maximum </strong>area of a rectangle that:</p>

<ul>
	<li>Can be formed using <strong>four</strong> of these points as its corners.</li>
	<li>Does <strong>not</strong> contain any other point inside or on its border.</li>
	<li>Has its edges&nbsp;<strong>parallel</strong> to the axes.</li>
</ul>

<p>Return the <strong>maximum area</strong> that you can obtain or -1 if no such rectangle is possible.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">xCoord = [1,1,3,3], yCoord = [1,3,1,3]</span></p>

<p><strong>Output:</strong> <span class="example-io">4</span></p>

<p><strong>Explanation:</strong></p>

<p><strong class="example"><img alt="Example 1 diagram" src="https://assets.leetcode.com/uploads/2024/11/02/example1.png" style="width: 229px; height: 228px;" /></strong></p>

<p>We can make a rectangle with these 4 points as corners and there is no other point that lies inside or on the border. Hence, the maximum possible area would be 4.</p>
</div>

<p><strong class="example">Example 2:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">xCoord = [1,1,3,3,2], yCoord = [1,3,1,3,2]</span></p>

<p><strong>Output:</strong> <span class="example-io">-1</span></p>

<p><strong>Explanation:</strong></p>

<p><strong class="example"><img alt="Example 2 diagram" src="https://assets.leetcode.com/uploads/2024/11/02/example2.png" style="width: 229px; height: 228px;" /></strong></p>

<p>There is only one rectangle possible is with points <code>[1,1], [1,3], [3,1]</code> and <code>[3,3]</code> but <code>[2,2]</code> will always lie inside it. Hence, returning -1.</p>
</div>

<p><strong class="example">Example 3:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">xCoord = [1,1,3,3,1,3], yCoord = [1,3,1,3,2,2]</span></p>

<p><strong>Output:</strong> <span class="example-io">2</span></p>

<p><strong>Explanation:</strong></p>

<p><strong class="example"><img alt="Example 3 diagram" src="https://assets.leetcode.com/uploads/2024/11/02/example3.png" style="width: 229px; height: 228px;" /></strong></p>

<p>The maximum area rectangle is formed by the points <code>[1,3], [1,2], [3,2], [3,3]</code>, which has an area of 2. Additionally, the points <code>[1,1], [1,2], [3,1], [3,2]</code> also form a valid rectangle with the same area.</p>
</div>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= xCoord.length == yCoord.length &lt;= 2 * 10<sup>5</sup></code></li>
	<li><code>0 &lt;= xCoord[i], yCoord[i]&nbsp;&lt;= 8 * 10<sup>7</sup></code></li>
	<li>All the given points are <strong>unique</strong>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-18">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/maximum-balanced-subsequence-sum/description" target="_blank" rel="noopener noreferrer">Maximum Balanced Subsequence Sum</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a <strong>0-indexed</strong> integer array <code>nums</code>.</p>

<p>A <strong>subsequence</strong> of <code>nums</code> having length <code>k</code> and consisting of <strong>indices</strong> <code>i<sub>0</sub>&nbsp;&lt;&nbsp;i<sub>1</sub> &lt;&nbsp;... &lt; i<sub>k-1</sub></code> is <strong>balanced</strong> if the following holds:</p>

<ul>
	<li><code>nums[i<sub>j</sub>] - nums[i<sub>j-1</sub>] &gt;= i<sub>j</sub> - i<sub>j-1</sub></code>, for every <code>j</code> in the range <code>[1, k - 1]</code>.</li>
</ul>

<p>A <strong>subsequence</strong> of <code>nums</code> having length <code>1</code> is considered balanced.</p>

<p>Return <em>an integer denoting the <strong>maximum</strong> possible <strong>sum of elements</strong> in a <strong>balanced</strong> subsequence of </em><code>nums</code>.</p>

<p>A <strong>subsequence</strong> of an array is a new <strong>non-empty</strong> array that is formed from the original array by deleting some (<strong>possibly none</strong>) of the elements without disturbing the relative positions of the remaining elements.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [3,3,5,6]
<strong>Output:</strong> 14
<strong>Explanation:</strong> In this example, the subsequence [3,5,6] consisting of indices 0, 2, and 3 can be selected.
nums[2] - nums[0] &gt;= 2 - 0.
nums[3] - nums[2] &gt;= 3 - 2.
Hence, it is a balanced subsequence, and its sum is the maximum among the balanced subsequences of nums.
The subsequence consisting of indices 1, 2, and 3 is also valid.
It can be shown that it is not possible to get a balanced subsequence with a sum greater than 14.</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [5,-1,-3,8]
<strong>Output:</strong> 13
<strong>Explanation:</strong> In this example, the subsequence [5,8] consisting of indices 0 and 3 can be selected.
nums[3] - nums[0] &gt;= 3 - 0.
Hence, it is a balanced subsequence, and its sum is the maximum among the balanced subsequences of nums.
It can be shown that it is not possible to get a balanced subsequence with a sum greater than 13.
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> nums = [-2,-1]
<strong>Output:</strong> -1
<strong>Explanation:</strong> In this example, the subsequence [-1] can be selected.
It is a balanced subsequence, and its sum is the maximum among the balanced subsequences of nums.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>-10<sup>9</sup> &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-19">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/maximum-sum-queries/description" target="_blank" rel="noopener noreferrer">Maximum Sum Queries</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">monotonic stack</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">sorting</span> <span class="topic-badge">stack</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given two <strong>0-indexed</strong> integer arrays <code>nums1</code> and <code>nums2</code>, each of length <code>n</code>, and a <strong>1-indexed 2D array</strong> <code>queries</code> where <code>queries[i] = [x<sub>i</sub>, y<sub>i</sub>]</code>.</p>

<p>For the <code>i<sup>th</sup></code> query, find the <strong>maximum value</strong> of <code>nums1[j] + nums2[j]</code> among all indices <code>j</code> <code>(0 &lt;= j &lt; n)</code>, where <code>nums1[j] &gt;= x<sub>i</sub></code> and <code>nums2[j] &gt;= y<sub>i</sub></code>, or <strong>-1</strong> if there is no <code>j</code> satisfying the constraints.</p>

<p>Return <em>an array </em><code>answer</code><em> where </em><code>answer[i]</code><em> is the answer to the </em><code>i<sup>th</sup></code><em> query.</em></p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums1 = [4,3,1,2], nums2 = [2,4,9,5], queries = [[4,1],[1,3],[2,5]]
<strong>Output:</strong> [6,10,7]
<strong>Explanation:</strong> 
For the 1st query <code node="[object Object]">x<sub>i</sub> = 4</code>&nbsp;and&nbsp;<code node="[object Object]">y<sub>i</sub> = 1</code>, we can select index&nbsp;<code node="[object Object]">j = 0</code>&nbsp;since&nbsp;<code node="[object Object]">nums1[j] &gt;= 4</code>&nbsp;and&nbsp;<code node="[object Object]">nums2[j] &gt;= 1</code>. The sum&nbsp;<code node="[object Object]">nums1[j] + nums2[j]</code>&nbsp;is 6, and we can show that 6 is the maximum we can obtain.

For the 2nd query <code node="[object Object]">x<sub>i</sub> = 1</code>&nbsp;and&nbsp;<code node="[object Object]">y<sub>i</sub> = 3</code>, we can select index&nbsp;<code node="[object Object]">j = 2</code>&nbsp;since&nbsp;<code node="[object Object]">nums1[j] &gt;= 1</code>&nbsp;and&nbsp;<code node="[object Object]">nums2[j] &gt;= 3</code>. The sum&nbsp;<code node="[object Object]">nums1[j] + nums2[j]</code>&nbsp;is 10, and we can show that 10 is the maximum we can obtain. 

For the 3rd query <code node="[object Object]">x<sub>i</sub> = 2</code>&nbsp;and&nbsp;<code node="[object Object]">y<sub>i</sub> = 5</code>, we can select index&nbsp;<code node="[object Object]">j = 3</code>&nbsp;since&nbsp;<code node="[object Object]">nums1[j] &gt;= 2</code>&nbsp;and&nbsp;<code node="[object Object]">nums2[j] &gt;= 5</code>. The sum&nbsp;<code node="[object Object]">nums1[j] + nums2[j]</code>&nbsp;is 7, and we can show that 7 is the maximum we can obtain.

Therefore, we return&nbsp;<code node="[object Object]">[6,10,7]</code>.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums1 = [3,2,5], nums2 = [2,3,4], queries = [[4,4],[3,2],[1,1]]
<strong>Output:</strong> [9,9,9]
<strong>Explanation:</strong> For this example, we can use index&nbsp;<code node="[object Object]">j = 2</code>&nbsp;for all the queries since it satisfies the constraints for each query.
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> nums1 = [2,1], nums2 = [2,3], queries = [[3,3]]
<strong>Output:</strong> [-1]
<strong>Explanation:</strong> There is one query in this example with <code node="[object Object]">x<sub>i</sub></code> = 3 and <code node="[object Object]">y<sub>i</sub></code> = 3. For every index, j, either nums1[j] &lt; <code node="[object Object]">x<sub>i</sub></code> or nums2[j] &lt; <code node="[object Object]">y<sub>i</sub></code>. Hence, there is no solution. 
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>nums1.length == nums2.length</code>&nbsp;</li>
	<li><code>n ==&nbsp;nums1.length&nbsp;</code></li>
	<li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= nums1[i], nums2[i] &lt;= 10<sup>9</sup>&nbsp;</code></li>
	<li><code>1 &lt;= queries.length &lt;= 10<sup>5</sup></code></li>
	<li><code>queries[i].length ==&nbsp;2</code></li>
	<li><code>x<sub>i</sub>&nbsp;== queries[i][1]</code></li>
	<li><code>y<sub>i</sub> == queries[i][2]</code></li>
	<li><code>1 &lt;= x<sub>i</sub>, y<sub>i</sub> &lt;= 10<sup>9</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-20">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/minimum-number-of-moves-to-make-palindrome/description" target="_blank" rel="noopener noreferrer">Minimum Number of Moves to Make Palindrome</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">greedy</span> <span class="topic-badge">string</span> <span class="topic-badge">two pointers</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a string <code>s</code> consisting only of lowercase English letters.</p>

<p>In one <strong>move</strong>, you can select any two <strong>adjacent</strong> characters of <code>s</code> and swap them.</p>

<p>Return <em>the <strong>minimum number of moves</strong> needed to make</em> <code>s</code> <em>a palindrome</em>.</p>

<p><strong>Note</strong> that the input will be generated such that <code>s</code> can always be converted to a palindrome.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> s = &quot;aabb&quot;
<strong>Output:</strong> 2
<strong>Explanation:</strong>
We can obtain two palindromes from s, &quot;abba&quot; and &quot;baab&quot;. 
- We can obtain &quot;abba&quot; from s in 2 moves: &quot;a<u><strong>ab</strong></u>b&quot; -&gt; &quot;ab<u><strong>ab</strong></u>&quot; -&gt; &quot;abba&quot;.
- We can obtain &quot;baab&quot; from s in 2 moves: &quot;a<u><strong>ab</strong></u>b&quot; -&gt; &quot;<u><strong>ab</strong></u>ab&quot; -&gt; &quot;baab&quot;.
Thus, the minimum number of moves needed to make s a palindrome is 2.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> s = &quot;letelt&quot;
<strong>Output:</strong> 2
<strong>Explanation:</strong>
One of the palindromes we can obtain from s in 2 moves is &quot;lettel&quot;.
One of the ways we can obtain it is &quot;lete<u><strong>lt</strong></u>&quot; -&gt; &quot;let<u><strong>et</strong></u>l&quot; -&gt; &quot;lettel&quot;.
Other palindromes such as &quot;tleelt&quot; can also be obtained in 2 moves.
It can be shown that it is not possible to obtain a palindrome in less than 2 moves.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= s.length &lt;= 2000</code></li>
	<li><code>s</code> consists only of lowercase English letters.</li>
	<li><code>s</code> can be converted to a palindrome using a finite number of moves.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-21">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/minimum-possible-integer-after-at-most-k-adjacent-swaps-on-digits/description" target="_blank" rel="noopener noreferrer">Minimum Possible Integer After at Most K Adjacent Swaps On Digits</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">greedy</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">string</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a string <code>num</code> representing <strong>the digits</strong> of a very large integer and an integer <code>k</code>. You are allowed to swap any two adjacent digits of the integer <strong>at most</strong> <code>k</code> times.</p>

<p>Return <em>the minimum integer you can obtain also as a string</em>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2020/06/17/q4_1.jpg" style="width: 500px; height: 40px;" />
<pre>
<strong>Input:</strong> num = &quot;4321&quot;, k = 4
<strong>Output:</strong> &quot;1342&quot;
<strong>Explanation:</strong> The steps to obtain the minimum integer from 4321 with 4 adjacent swaps are shown.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> num = &quot;100&quot;, k = 1
<strong>Output:</strong> &quot;010&quot;
<strong>Explanation:</strong> It&#39;s ok for the output to have leading zeros, but the input is guaranteed not to have any leading zeros.
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> num = &quot;36789&quot;, k = 1000
<strong>Output:</strong> &quot;36789&quot;
<strong>Explanation:</strong> We can keep the number without any swaps.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= num.length &lt;= 3 * 10<sup>4</sup></code></li>
	<li><code>num</code> consists of only <strong>digits</strong> and does not contain <strong>leading zeros</strong>.</li>
	<li><code>1 &lt;= k &lt;= 10<sup>9</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-22">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/number-of-integers-with-popcount-depth-equal-to-k-ii/description" target="_blank" rel="noopener noreferrer">Number of Integers With Popcount-Depth Equal to K II</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given an integer array <code>nums</code>.</p>

<p>For any positive integer <code>x</code>, define the following sequence:</p>

<ul>
	<li><code>p<sub>0</sub> = x</code></li>
	<li><code>p<sub>i+1</sub> = popcount(p<sub>i</sub>)</code> for all <code>i &gt;= 0</code>, where <code>popcount(y)</code> is the number of set bits (1&#39;s) in the binary representation of <code>y</code>.</li>
</ul>

<p>This sequence will eventually reach the value 1.</p>

<p>The <strong>popcount-depth</strong> of <code>x</code> is defined as the <strong>smallest</strong> integer <code>d &gt;= 0</code> such that <code>p<sub>d</sub> = 1</code>.</p>

<p>For example, if <code>x = 7</code> (binary representation <code>&quot;111&quot;</code>). Then, the sequence is: <code>7 &rarr; 3 &rarr; 2 &rarr; 1</code>, so the popcount-depth of 7 is 3.</p>

<p>You are also given a 2D integer array <code>queries</code>, where each <code>queries[i]</code> is either:</p>

<ul>
	<li><code>[1, l, r, k]</code> - <strong>Determine</strong> the number of indices <code>j</code> such that <code>l &lt;= j &lt;= r</code> and the <strong>popcount-depth</strong> of <code>nums[j]</code> is equal to <code>k</code>.</li>
	<li><code>[2, idx, val]</code> - <strong>Update</strong> <code>nums[idx]</code> to <code>val</code>.</li>
</ul>

<p>Return an integer array <code>answer</code>, where <code>answer[i]</code> is the number of indices for the <code>i<sup>th</sup></code> query of type <code>[1, l, r, k]</code>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">nums = [2,4], queries = [[1,0,1,1],[2,1,1],[1,0,1,0]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[2,1]</span></p>

<p><strong>Explanation:</strong></p>

<table style="border: 1px solid black;">
	<thead>
		<tr>
			<th style="border: 1px solid black;"><code>i</code></th>
			<th style="border: 1px solid black;"><code>queries[i]</code></th>
			<th style="border: 1px solid black;"><code>nums</code></th>
			<th style="border: 1px solid black;">binary(<code>nums</code>)</th>
			<th style="border: 1px solid black;">popcount-<br />
			depth</th>
			<th style="border: 1px solid black;"><code>[l, r]</code></th>
			<th style="border: 1px solid black;"><code>k</code></th>
			<th style="border: 1px solid black;">Valid<br />
			<code>nums[j]</code></th>
			<th style="border: 1px solid black;">updated<br />
			<code>nums</code></th>
			<th style="border: 1px solid black;">Answer</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="border: 1px solid black;">0</td>
			<td style="border: 1px solid black;">[1,0,1,1]</td>
			<td style="border: 1px solid black;">[2,4]</td>
			<td style="border: 1px solid black;">[10, 100]</td>
			<td style="border: 1px solid black;">[1, 1]</td>
			<td style="border: 1px solid black;">[0, 1]</td>
			<td style="border: 1px solid black;">1</td>
			<td style="border: 1px solid black;">[0, 1]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">2</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">1</td>
			<td style="border: 1px solid black;">[2,1,1]</td>
			<td style="border: 1px solid black;">[2,4]</td>
			<td style="border: 1px solid black;">[10, 100]</td>
			<td style="border: 1px solid black;">[1, 1]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">[2,1]</td>
			<td style="border: 1px solid black;">&mdash;</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">2</td>
			<td style="border: 1px solid black;">[1,0,1,0]</td>
			<td style="border: 1px solid black;">[2,1]</td>
			<td style="border: 1px solid black;">[10, 1]</td>
			<td style="border: 1px solid black;">[1, 0]</td>
			<td style="border: 1px solid black;">[0, 1]</td>
			<td style="border: 1px solid black;">0</td>
			<td style="border: 1px solid black;">[1]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">1</td>
		</tr>
	</tbody>
</table>

<p>Thus, the final <code>answer</code> is <code>[2, 1]</code>.</p>
</div>

<p><strong class="example">Example 2:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">nums = [3,5,6], queries = [[1,0,2,2],[2,1,4],[1,1,2,1],[1,0,1,0]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[3,1,0]</span></p>

<p><strong>Explanation:</strong></p>

<table style="border: 1px solid black;">
	<thead>
		<tr>
			<th style="border: 1px solid black;"><code>i</code></th>
			<th style="border: 1px solid black;"><code>queries[i]</code></th>
			<th style="border: 1px solid black;"><code>nums</code></th>
			<th style="border: 1px solid black;">binary(<code>nums</code>)</th>
			<th style="border: 1px solid black;">popcount-<br />
			depth</th>
			<th style="border: 1px solid black;"><code>[l, r]</code></th>
			<th style="border: 1px solid black;"><code>k</code></th>
			<th style="border: 1px solid black;">Valid<br />
			<code>nums[j]</code></th>
			<th style="border: 1px solid black;">updated<br />
			<code>nums</code></th>
			<th style="border: 1px solid black;">Answer</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="border: 1px solid black;">0</td>
			<td style="border: 1px solid black;">[1,0,2,2]</td>
			<td style="border: 1px solid black;">[3, 5, 6]</td>
			<td style="border: 1px solid black;">[11, 101, 110]</td>
			<td style="border: 1px solid black;">[2, 2, 2]</td>
			<td style="border: 1px solid black;">[0, 2]</td>
			<td style="border: 1px solid black;">2</td>
			<td style="border: 1px solid black;">[0, 1, 2]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">3</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">1</td>
			<td style="border: 1px solid black;">[2,1,4]</td>
			<td style="border: 1px solid black;">[3, 5, 6]</td>
			<td style="border: 1px solid black;">[11, 101, 110]</td>
			<td style="border: 1px solid black;">[2, 2, 2]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">[3, 4, 6]</td>
			<td style="border: 1px solid black;">&mdash;</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">2</td>
			<td style="border: 1px solid black;">[1,1,2,1]</td>
			<td style="border: 1px solid black;">[3, 4, 6]</td>
			<td style="border: 1px solid black;">[11, 100, 110]</td>
			<td style="border: 1px solid black;">[2, 1, 2]</td>
			<td style="border: 1px solid black;">[1, 2]</td>
			<td style="border: 1px solid black;">1</td>
			<td style="border: 1px solid black;">[1]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">1</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">3</td>
			<td style="border: 1px solid black;">[1,0,1,0]</td>
			<td style="border: 1px solid black;">[3, 4, 6]</td>
			<td style="border: 1px solid black;">[11, 100, 110]</td>
			<td style="border: 1px solid black;">[2, 1, 2]</td>
			<td style="border: 1px solid black;">[0, 1]</td>
			<td style="border: 1px solid black;">0</td>
			<td style="border: 1px solid black;">[]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">0</td>
		</tr>
	</tbody>
</table>

<p>Thus, the final <code>answer</code> is <code>[3, 1, 0]</code>.</p>
</div>

<p><strong class="example">Example 3:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">nums = [1,2], queries = [[1,0,1,1],[2,0,3],[1,0,0,1],[1,0,0,2]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[1,0,1]</span></p>

<p><strong>Explanation:</strong></p>

<table style="border: 1px solid black;">
	<thead>
		<tr>
			<th style="border: 1px solid black;"><code>i</code></th>
			<th style="border: 1px solid black;"><code>queries[i]</code></th>
			<th style="border: 1px solid black;"><code>nums</code></th>
			<th style="border: 1px solid black;">binary(<code>nums</code>)</th>
			<th style="border: 1px solid black;">popcount-<br />
			depth</th>
			<th style="border: 1px solid black;"><code>[l, r]</code></th>
			<th style="border: 1px solid black;"><code>k</code></th>
			<th style="border: 1px solid black;">Valid<br />
			<code>nums[j]</code></th>
			<th style="border: 1px solid black;">updated<br />
			<code>nums</code></th>
			<th style="border: 1px solid black;">Answer</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="border: 1px solid black;">0</td>
			<td style="border: 1px solid black;">[1,0,1,1]</td>
			<td style="border: 1px solid black;">[1, 2]</td>
			<td style="border: 1px solid black;">[1, 10]</td>
			<td style="border: 1px solid black;">[0, 1]</td>
			<td style="border: 1px solid black;">[0, 1]</td>
			<td style="border: 1px solid black;">1</td>
			<td style="border: 1px solid black;">[1]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">1</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">1</td>
			<td style="border: 1px solid black;">[2,0,3]</td>
			<td style="border: 1px solid black;">[1, 2]</td>
			<td style="border: 1px solid black;">[1, 10]</td>
			<td style="border: 1px solid black;">[0, 1]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">[3, 2]</td>
			<td style="border: 1px solid black;">&nbsp;</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">2</td>
			<td style="border: 1px solid black;">[1,0,0,1]</td>
			<td style="border: 1px solid black;">[3, 2]</td>
			<td style="border: 1px solid black;">[11, 10]</td>
			<td style="border: 1px solid black;">[2, 1]</td>
			<td style="border: 1px solid black;">[0, 0]</td>
			<td style="border: 1px solid black;">1</td>
			<td style="border: 1px solid black;">[]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">0</td>
		</tr>
		<tr>
			<td style="border: 1px solid black;">3</td>
			<td style="border: 1px solid black;">[1,0,0,2]</td>
			<td style="border: 1px solid black;">[3, 2]</td>
			<td style="border: 1px solid black;">[11, 10]</td>
			<td style="border: 1px solid black;">[2, 1]</td>
			<td style="border: 1px solid black;">[0, 0]</td>
			<td style="border: 1px solid black;">2</td>
			<td style="border: 1px solid black;">[0]</td>
			<td style="border: 1px solid black;">&mdash;</td>
			<td style="border: 1px solid black;">1</td>
		</tr>
	</tbody>
</table>

<p>Thus, the final <code>answer</code> is <code>[1, 0, 1]</code>.</p>
</div>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= n == nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= nums[i] &lt;= 10<sup>15</sup></code></li>
	<li><code>1 &lt;= queries.length &lt;= 10<sup>5</sup></code></li>
	<li><code>queries[i].length == 3</code> or <code>4</code>
	<ul>
		<li><code>queries[i] == [1, l, r, k]</code> or,</li>
		<li><code>queries[i] == [2, idx, val]</code></li>
		<li><code>0 &lt;= l &lt;= r &lt;= n - 1</code></li>
		<li><code>0 &lt;= k &lt;= 5</code></li>
		<li><code>0 &lt;= idx &lt;= n - 1</code></li>
		<li><code>1 &lt;= val &lt;= 10<sup>15</sup></code></li>
	</ul>
	</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-23">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/number-of-longest-increasing-subsequence/description" target="_blank" rel="noopener noreferrer">Number of Longest Increasing Subsequence</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						<span class="availability-badge solution">Solution</span>
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given an integer array&nbsp;<code>nums</code>, return <em>the number of longest increasing subsequences.</em></p>

<p><strong>Notice</strong> that the sequence has to be <strong>strictly</strong> increasing.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,3,5,4,7]
<strong>Output:</strong> 2
<strong>Explanation:</strong> The two longest increasing subsequences are [1, 3, 4, 7] and [1, 3, 5, 7].
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [2,2,2,2,2]
<strong>Output:</strong> 5
<strong>Explanation:</strong> The length of the longest increasing subsequence is 1, and there are 5 increasing subsequences of length 1, so output 5.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 2000</code></li>
	<li><code>-10<sup>6</sup> &lt;= nums[i] &lt;= 10<sup>6</sup></code></li>
	<li>The answer is guaranteed to fit inside a 32-bit integer.</li>
</ul>
</div>
			</div>
			
			<div class="solution-section">
					<h3>Solution</h3>
					<div class="content-section"><p>[TOC]</p>
<h2 id="solution">Solution</h2>
<hr />
<blockquote>
<p><strong>Note.</strong> For this problem, we assume that you already know the fundamentals of dynamic programming and are figuring out how to apply it to a wide range of problems, such as this one. If you are not yet at this stage, we recommend checking out our relevant <a href="https://leetcode.com/explore/featured/card/dynamic-programming/">Explore Card content on dynamic programming</a> before returning to this article.</p>
</blockquote>
<h3 id="approach-1-bottom-up-dynamic-programming">Approach 1: Bottom-up Dynamic Programming</h3>
<h4 id="intuition">Intuition</h4>
<p>Before attempting this problem, please first solve <a href="https://leetcode.com/problems/longest-increasing-subsequence/">Longest Increasing Subsequence</a>, which this problem is a follow up to.</p>
<p>Consider an array <span class="math inline">\(\text{nums}\)</span> of length <span class="math inline">\(n\)</span> representing a sequence of numbers. To find the number of longest increasing subsequences (LISs) in this array, we introduce two dynamic programming (DP) arrays: <span class="math inline">\(\text{length}\)</span> and <span class="math inline">\(\text{count}\)</span>.</p>
<p><span class="math inline">\(\text{length}[i]\)</span> represents the length of the LIS ending at index <span class="math inline">\(i\)</span> in the <span class="math inline">\(\text{nums}\)</span> array, while <span class="math inline">\(\text{count}[i]\)</span> denotes the count of LISs ending at index <span class="math inline">\(i\)</span>.</p>
<p>Notice that <span class="math inline">\(\text{length}\)</span> here represents the answer to <strong>Longest Increasing Subsequence</strong> and <span class="math inline">\(\text{count}\)</span> represents the answer to this problem.</p>
<p>!?!../Documents/673/slideshow.json:1000,500!?!</p>
<p>For instance, given <span class="math inline">\(\text{nums} = [1, 3, 2, 4]\)</span>, we can illustrate the purpose of these arrays. Here, <span class="math inline">\(\text{length}[0] = 1\)</span> because the longest increasing subsequence ending at index <span class="math inline">\(0\)</span> is the number <span class="math inline">\(1\)</span> itself. Similarly, <span class="math inline">\(\text{length}[1] = 2\)</span> as the LIS ending at index <span class="math inline">\(1\)</span> is <span class="math inline">\([1, 3]\)</span>. Continuing, <span class="math inline">\(\text{length}[2] = 2\)</span> since the LIS ending at index <span class="math inline">\(2\)</span> is <span class="math inline">\([1, 2]\)</span>. Finally, <span class="math inline">\(\text{length}[3] = 3\)</span> as the LIS ending at index <span class="math inline">\(3\)</span> is either <span class="math inline">\([1, 3, 4]\)</span> or <span class="math inline">\([1, 2, 4]\)</span>.</p>
<p>In addition, we use <span class="math inline">\(\text{count}\)</span> to keep track of the count of the longest increasing subsequences. In the example above, <span class="math inline">\(\text{count}[0] = 1\)</span> because only one LIS ends at index <span class="math inline">\(0\)</span>. Similarly, <span class="math inline">\(\text{count}[1] = 1\)</span> and <span class="math inline">\(\text{count}[2] = 1\)</span> since one LIS is ending at each of those indices. <span class="math inline">\(\text{count}[3] = 2\)</span> because there are two LISs ending at index <span class="math inline">\(3\)</span>.</p>
<p>By utilizing these two DP arrays, we can efficiently compute the count of the LISs in the given <span class="math inline">\(\text{nums}\)</span> array.</p>
<p>Initially, every subsequence consisting of a single element is increasing. Therefore, we initialize <span class="math inline">\(\text{length}[i] = 1\)</span> and <span class="math inline">\(\text{count}[i] = 1\)</span> for all indices <span class="math inline">\(i\)</span> in the array. As we iterate through the array, if we encounter a longer subsequence ending at index <span class="math inline">\(i\)</span>, we update the values of <span class="math inline">\(\text{length}[i]\)</span> and <span class="math inline">\(\text{count}[i]\)</span> accordingly.</p>
<p>To compute the DP values for index <span class="math inline">\(i\)</span>, we first calculate the values for all positions <span class="math inline">\(j < i\)</span>.</p>
<p>For each index <span class="math inline">\(j\)</span> such that <span class="math inline">\(j < i\)</span> and <span class="math inline">\(\text{nums}[j] < \text{nums}[i]\)</span>, we can extend any increasing subsequence that ends at index <span class="math inline">\(j\)</span> by adding the element at index <span class="math inline">\(i\)</span>. The length of the LIS ending at position <span class="math inline">\(j\)</span> is <span class="math inline">\(\text{length}[j]\)</span>. By extending the subsequence, we obtain a new subsequence of length <span class="math inline">\(\text{length}[j] + 1\)</span> that ends at index <span class="math inline">\(i\)</span>. We update the <span class="math inline">\(\text{length}[i]\)</span> value to be the maximum length of an increasing subsequence ending at index <span class="math inline">\(i\)</span> seen so far.</p>
<p>If <span class="math inline">\(\text{length}[j] + 1 > \text{length}[i]\)</span>, it means we have found a longer subsequence ending at index <span class="math inline">\(i\)</span>. In this case, we update <span class="math inline">\(\text{length}[i]\)</span> to <span class="math inline">\(\text{length}[j] + 1\)</span>. Additionally, we discard any subsequences we saw earlier since they are no longer LIS: reset <span class="math inline">\(\text{count}[i]\)</span> to zero.</p>
<p>Next, we check the equality <span class="math inline">\(\text{length}[j] + 1 = \text{length}[i]\)</span>. If <span class="math inline">\(\text{length}[j] + 1 = \text{length}[i]\)</span>, it implies that we can extend every LIS ending at index <span class="math inline">\(j\)</span> with the element <span class="math inline">\(\text{nums}[i]\)</span> to create new longest increasing subsequences ending at index <span class="math inline">\(i\)</span>. Therefore, we add <span class="math inline">\(\text{count}[j]\)</span> to <span class="math inline">\(\text{count}[i]\)</span> to count all subsequences that include both indices <span class="math inline">\(j\)</span> and <span class="math inline">\(i\)</span>. Note that <span class="math inline">\(\text{length}[i]\)</span> might have just become <span class="math inline">\(\text{length}[j] + 1\)</span> during the previous step.</p>
<p>Let's consider the length of the LIS of the entire array <span class="math inline">\(\text{nums}\)</span>, denoted as <span class="math inline">\(\text{maxLength}\)</span>, which equals the maximum <span class="math inline">\(\text{length}[i]\)</span>. By finding <span class="math inline">\(\text{maxLength}\)</span>, we determine the target length we aim to achieve for our subsequences.</p>
<p>To calculate <span class="math inline">\(\text{result}\)</span>, the total number of LISs in the array, we need to sum up the <span class="math inline">\(\text{count}[i]\)</span> values for all indices <span class="math inline">\(i\)</span> where the length of the subsequence, <span class="math inline">\(\text{length}[i]\)</span>, is equal to <span class="math inline">\(\text{maxLength}\)</span>. These indices represent the endpoints of the longest increasing subsequences in the array. By adding up their corresponding <span class="math inline">\(\text{count}[i]\)</span> values, we account for all possible LISs.</p>
<h4 id="algorithm">Algorithm</h4>
<ol>
<li>Declare two DP arrays <span class="math inline">\(\text{length}\)</span> and <span class="math inline">\(\text{count}\)</span>, and initialize <span class="math inline">\(\text{length}[i] = 1\)</span>, <span class="math inline">\(\text{count}[i] = 1\)</span>.</li>
<li>Iterate <span class="math inline">\(i\)</span> from <span class="math inline">\(0\)</span> to <span class="math inline">\(n - 1\)</span>.
<ul>
<li>Iterate <span class="math inline">\(j\)</span> from <span class="math inline">\(0\)</span> to <span class="math inline">\(i - 1\)</span>.
<ul>
<li>If <span class="math inline">\(\text{nums}[j] < \text{nums}[i]\)</span>.
<ul>
<li>If <span class="math inline">\(\text{length}[j] + 1 > \text{length}[i]\)</span>, update <span class="math inline">\(\text{length}[i]\)</span> with <span class="math inline">\(\text{length}[j] + 1\)</span> and set <span class="math inline">\(\text{count}[i]\)</span> to zero.</li>
<li>If <span class="math inline">\(\text{length}[j] + 1 = \text{length}[i]\)</span>, add <span class="math inline">\(\text{count}[j]\)</span> to <span class="math inline">\(\text{count}[i]\)</span>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Let <span class="math inline">\(\text{maxLength}\)</span> be the maximum value in the array <span class="math inline">\(\text{length}\)</span>.</li>
<li>Initialize <span class="math inline">\(\text{result} = 0\)</span>.</li>
<li>Iterate <span class="math inline">\(i\)</span> from <span class="math inline">\(0\)</span> to <span class="math inline">\(n - 1\)</span>.
<ul>
<li>If <span class="math inline">\(\text{length}[i] = \text{maxLength}\)</span>, add <span class="math inline">\(\text{count}[i]\)</span> to <span class="math inline">\(\text{result}\)</span>.</li>
</ul>
</li>
<li>Return <span class="math inline">\(\text{result}\)</span>.</li>
</ol>
<h4 id="implementation">Implementation</h4>
<p><a href="https://leetcode.com/playground/Q6GAPagG/shared">code</a></p>
<h4 id="complexity-analysis">Complexity Analysis</h4>
<ul>
<li>Time Complexity: <span class="math inline">\(O(n^2)\)</span>.</li>
</ul>
<p>The nested loops iterate over the input array <span class="math inline">\(\text{nums}\)</span>, resulting in an overall time complexity of <span class="math inline">\(O(n^2)\)</span>, where <span class="math inline">\(n\)</span> is the array length. The outer loop iterates <span class="math inline">\(n\)</span> times, and the inner loop iterates up to <span class="math inline">\(i\)</span> times, where <span class="math inline">\(i\)</span> ranges from <span class="math inline">\(0\)</span> to <span class="math inline">\(n-1\)</span>.</p>
<ul>
<li>Space Complexity: <span class="math inline">\(O(n)\)</span>.</li>
</ul>
<p>We store two DP arrays: <span class="math inline">\(\text{length}\)</span> and <span class="math inline">\(\text{count}\)</span>, each with a length of <span class="math inline">\(n\)</span>. Therefore, the space required to store these arrays is <span class="math inline">\(O(n)\)</span>.</p>
<hr />
<h3 id="approach-2-top-down-dynamic-programming-memoization">Approach 2: Top-down Dynamic Programming (Memoization)</h3>
<h4 id="intuition-1">Intuition</h4>
<p>In this approach, we will calculate the DP arrays <span class="math inline">\(\text{length}\)</span> and <span class="math inline">\(\text{count}\)</span> using the same recurrence relation as in the previous one, but the organization of computations will be different.</p>
<p>We will utilize a recursive function called <span class="math inline">\(\text{calculateDP}(i)\)</span> that computes the DP values <span class="math inline">\(\text{length}[i]\)</span> and <span class="math inline">\(\text{count}[i]\)</span> when called for the first time with a particular <span class="math inline">\(i\)</span> value. Once the values <span class="math inline">\(\text{length}[i]\)</span> and <span class="math inline">\(\text{count}[i]\)</span> are computed, subsequent calls to <span class="math inline">\(\text{calculateDP}(i)\)</span> will terminate immediately.</p>
<p>For example, when we first call <span class="math inline">\(\text{calculateDP}(4)\)</span>, it computes <span class="math inline">\(\text{length}[4]\)</span> and <span class="math inline">\(\text{count}[4]\)</span>. When we make subsequent calls to <span class="math inline">\(\text{calculateDP}(4)\)</span>, it returns immediately.</p>
<p>This approach ensures that we calculate the DP value for each state (each <span class="math inline">\(i\)</span>) only once.</p>
<p>To compute <span class="math inline">\(\text{length}[i]\)</span> and <span class="math inline">\(\text{count}[i]\)</span>, we will follow the same steps as in the previous approach: iterate over <span class="math inline">\(j\)</span> such that <span class="math inline">\(j < i\)</span> and <span class="math inline">\(\text{nums}[j] < \text{nums}[i]\)</span>, and update the DP values for <span class="math inline">\(i\)</span> using the DP values for <span class="math inline">\(j\)</span>.</p>
<p>To determine whether we need to compute the DP values for <span class="math inline">\(i\)</span> or return immediately, we can initialize the DP arrays <span class="math inline">\(\text{length}\)</span> and <span class="math inline">\(\text{count}\)</span> with zeros. Thus, <span class="math inline">\(\text{length}[i] = 0\)</span> will indicate that we have not yet computed the DP values for <span class="math inline">\(i\)</span>. Once we find the result for <span class="math inline">\(i\)</span>, we will update <span class="math inline">\(\text{length}[i]\)</span> and <span class="math inline">\(\text{count}[i]\)</span>, and <span class="math inline">\(\text{length}[i]\)</span> will no longer be zero, indicating that we have computed the values.</p>
<h4 id="algorithm-1">Algorithm</h4>
<p>The function <span class="math inline">\(\text{calculateDP}\)</span> takes a parameter <span class="math inline">\(i\)</span>.</p>
<ol>
<li>If <span class="math inline">\(\text{length}[i] \ne 0\)</span> (which means that we found this value earlier), return from the function.</li>
<li>Assign <span class="math inline">\(\text{length}[i] = 1\)</span>, <span class="math inline">\(\text{count}[i] = 1\)</span> (the DP initialization).</li>
<li>Iterate <span class="math inline">\(j\)</span> from <span class="math inline">\(0\)</span> to <span class="math inline">\(i - 1\)</span>.
<ul>
<li>If <span class="math inline">\(\text{nums}[j] < \text{nums}[i]\)</span>.
<ul>
<li>Call <span class="math inline">\(\text{calculateDP}(j)\)</span> recursively to ensure that <span class="math inline">\(\text{length}[j]\)</span> and <span class="math inline">\(\text{count}[j]\)</span> are calculated.</li>
<li>If <span class="math inline">\(\text{length}[j] + 1 > \text{length}[i]\)</span>, update <span class="math inline">\(\text{length}[i]\)</span> with <span class="math inline">\(\text{length}[j] + 1\)</span> and set <span class="math inline">\(\text{count}[i]\)</span> to zero.</li>
<li>If <span class="math inline">\(\text{length}[j] + 1 = \text{length}[i]\)</span>, add <span class="math inline">\(\text{count}[j]\)</span> to <span class="math inline">\(\text{count}[i]\)</span>.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>In the main function, one needs to do the following.</p>
<ol>
<li>Initialize <span class="math inline">\(\text{maxLength} = 0\)</span> and <span class="math inline">\(\text{result} = 0\)</span>.</li>
<li>Iterate <span class="math inline">\(i\)</span> from <span class="math inline">\(0\)</span> to <span class="math inline">\(n - 1\)</span>.
<ul>
<li>Call <span class="math inline">\(\text{calculateDP}(i)\)</span>.</li>
<li>Assign <span class="math inline">\(\text{maxLength} = \max(\text{maxLength}, \text{length}[i])\)</span>.</li>
</ul>
</li>
<li>Iterate <span class="math inline">\(i\)</span> from <span class="math inline">\(0\)</span> to <span class="math inline">\(n - 1\)</span>.
<ul>
<li>If <span class="math inline">\(\text{length}[i] = \text{maxLength}\)</span>, add <span class="math inline">\(\text{count}[i]\)</span> to <span class="math inline">\(\text{result}\)</span>.</li>
</ul>
</li>
<li>Return <span class="math inline">\(\text{result}\)</span>.</li>
</ol>
<h4 id="implementation-1">Implementation</h4>
<p><a href="https://leetcode.com/playground/eWJZudA2/shared">code</a></p>
<h4 id="complexity-analysis-1">Complexity Analysis</h4>
<ul>
<li>Time Complexity: <span class="math inline">\(O(n^2)\)</span>.</li>
</ul>
<p>Even though we changed the order in which we calculate DP, the time complexity is the same as in the previous approach: for each <span class="math inline">\(i\)</span>, we compute <span class="math inline">\(\text{length}[i]\)</span> and <span class="math inline">\(\text{count}[i]\)</span> in <span class="math inline">\(O(n)\)</span>.</p>
<ul>
<li>Space Complexity: <span class="math inline">\(O(n)\)</span>.</li>
</ul>
<p>We store the DP arrays <span class="math inline">\(\text{length}\)</span> and <span class="math inline">\(\text{count}\)</span> of size <span class="math inline">\(n\)</span>, as in the previous approach.</p>
</div>
				</div>
		</div>

<div class="question-card" id="question-24">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/number-of-pairs-satisfying-inequality/description" target="_blank" rel="noopener noreferrer">Number of Pairs Satisfying Inequality</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">merge sort</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given two <strong>0-indexed</strong> integer arrays <code>nums1</code> and <code>nums2</code>, each of size <code>n</code>, and an integer <code>diff</code>. Find the number of <strong>pairs</strong> <code>(i, j)</code> such that:</p>

<ul>
	<li><code>0 &lt;= i &lt; j &lt;= n - 1</code> <strong>and</strong></li>
	<li><code>nums1[i] - nums1[j] &lt;= nums2[i] - nums2[j] + diff</code>.</li>
</ul>

<p>Return<em> the <strong>number of pairs</strong> that satisfy the conditions.</em></p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums1 = [3,2,5], nums2 = [2,2,1], diff = 1
<strong>Output:</strong> 3
<strong>Explanation:</strong>
There are 3 pairs that satisfy the conditions:
1. i = 0, j = 1: 3 - 2 &lt;= 2 - 2 + 1. Since i &lt; j and 1 &lt;= 1, this pair satisfies the conditions.
2. i = 0, j = 2: 3 - 5 &lt;= 2 - 1 + 1. Since i &lt; j and -2 &lt;= 2, this pair satisfies the conditions.
3. i = 1, j = 2: 2 - 5 &lt;= 2 - 1 + 1. Since i &lt; j and -3 &lt;= 2, this pair satisfies the conditions.
Therefore, we return 3.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums1 = [3,-1], nums2 = [-2,2], diff = -1
<strong>Output:</strong> 0
<strong>Explanation:</strong>
Since there does not exist any pair that satisfies the conditions, we return 0.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>n == nums1.length == nums2.length</code></li>
	<li><code>2 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>-10<sup>4</sup> &lt;= nums1[i], nums2[i] &lt;= 10<sup>4</sup></code></li>
	<li><code>-10<sup>4</sup> &lt;= diff &lt;= 10<sup>4</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-25">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/online-majority-element-in-subarray/description" target="_blank" rel="noopener noreferrer">Online Majority Element In Subarray</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">design</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Design a data structure that efficiently finds the <strong>majority element</strong> of a given subarray.</p>

<p>The <strong>majority element</strong> of a subarray is an element that occurs <code>threshold</code> times or more in the subarray.</p>

<p>Implementing the <code>MajorityChecker</code> class:</p>

<ul>
	<li><code>MajorityChecker(int[] arr)</code> Initializes the instance of the class with the given array <code>arr</code>.</li>
	<li><code>int query(int left, int right, int threshold)</code> returns the element in the subarray <code>arr[left...right]</code> that occurs at least <code>threshold</code> times, or <code>-1</code> if no such element exists.</li>
</ul>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input</strong>
[&quot;MajorityChecker&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;]
[[[1, 1, 2, 2, 1, 1]], [0, 5, 4], [0, 3, 3], [2, 3, 2]]
<strong>Output</strong>
[null, 1, -1, 2]

<strong>Explanation</strong>
MajorityChecker majorityChecker = new MajorityChecker([1, 1, 2, 2, 1, 1]);
majorityChecker.query(0, 5, 4); // return 1
majorityChecker.query(0, 3, 3); // return -1
majorityChecker.query(2, 3, 2); // return 2
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= arr.length &lt;= 2 * 10<sup>4</sup></code></li>
	<li><code>1 &lt;= arr[i] &lt;= 2 * 10<sup>4</sup></code></li>
	<li><code>0 &lt;= left &lt;= right &lt; arr.length</code></li>
	<li><code>threshold &lt;= right - left + 1</code></li>
	<li><code>2 * threshold &gt; right - left + 1</code></li>
	<li>At most <code>10<sup>4</sup></code> calls will be made to <code>query</code>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-26">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/peaks-in-array/description" target="_blank" rel="noopener noreferrer">Peaks in Array</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>A <strong>peak</strong> in an array <code>arr</code> is an element that is <strong>greater</strong> than its previous and next element in <code>arr</code>.</p>

<p>You are given an integer array <code>nums</code> and a 2D integer array <code>queries</code>.</p>

<p>You have to process queries of two types:</p>

<ul>
	<li><code>queries[i] = [1, l<sub>i</sub>, r<sub>i</sub>]</code>, determine the count of <strong>peak</strong> elements in the <span data-keyword="subarray">subarray</span> <code>nums[l<sub>i</sub>..r<sub>i</sub>]</code>.<!-- notionvc: 73b20b7c-e1ab-4dac-86d0-13761094a9ae --></li>
	<li><code>queries[i] = [2, index<sub>i</sub>, val<sub>i</sub>]</code>, change <code>nums[index<sub>i</sub>]</code> to <code><font face="monospace">val<sub>i</sub></font></code>.</li>
</ul>

<p>Return an array <code>answer</code> containing the results of the queries of the first type in order.<!-- notionvc: a9ccef22-4061-4b5a-b4cc-a2b2a0e12f30 --></p>

<p><strong>Notes:</strong></p>

<ul>
	<li>The <strong>first</strong> and the <strong>last</strong> element of an array or a subarray<!-- notionvc: fcffef72-deb5-47cb-8719-3a3790102f73 --> <strong>cannot</strong> be a peak.</li>
</ul>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">nums = [3,1,4,2,5], queries = [[2,3,4],[1,0,4]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[0]</span></p>

<p><strong>Explanation:</strong></p>

<p>First query: We change <code>nums[3]</code> to 4 and <code>nums</code> becomes <code>[3,1,4,4,5]</code>.</p>

<p>Second query: The number of peaks in the <code>[3,1,4,4,5]</code> is 0.</p>
</div>

<p><strong class="example">Example 2:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">nums = [4,1,4,2,1,5], queries = [[2,2,4],[1,0,2],[1,0,4]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[0,1]</span></p>

<p><strong>Explanation:</strong></p>

<p>First query: <code>nums[2]</code> should become 4, but it is already set to 4.</p>

<p>Second query: The number of peaks in the <code>[4,1,4]</code> is 0.</p>

<p>Third query: The second 4 is a peak in the <code>[4,1,4,2,1]</code>.</p>
</div>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>3 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= nums[i] &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= queries.length &lt;= 10<sup>5</sup></code></li>
	<li><code>queries[i][0] == 1</code> or <code>queries[i][0] == 2</code></li>
	<li>For all <code>i</code> that:
	<ul>
		<li><code>queries[i][0] == 1</code>: <code>0 &lt;= queries[i][1] &lt;= queries[i][2] &lt;= nums.length - 1</code></li>
		<li><code>queries[i][0] == 2</code>: <code>0 &lt;= queries[i][1] &lt;= nums.length - 1</code>, <code>1 &lt;= queries[i][2] &lt;= 10<sup>5</sup></code></li>
	</ul>
	</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-27">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/queries-on-a-permutation-with-key/description" target="_blank" rel="noopener noreferrer">Queries on a Permutation With Key</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">simulation</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given the array <code>queries</code> of positive integers between <code>1</code> and <code>m</code>, you have to process all <code>queries[i]</code> (from <code>i=0</code> to <code>i=queries.length-1</code>) according to the following rules:</p>

<ul>
	<li>In the beginning, you have the permutation <code>P=[1,2,3,...,m]</code>.</li>
	<li>For the current <code>i</code>, find the position of <code>queries[i]</code> in the permutation <code>P</code> (<strong>indexing from 0</strong>) and then move this at the beginning of the permutation <code>P</code>. Notice that the position of <code>queries[i]</code> in <code>P</code> is the result for <code>queries[i]</code>.</li>
</ul>

<p>Return an array containing the result for the given <code>queries</code>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> queries = [3,1,2,1], m = 5
<strong>Output:</strong> [2,1,2,1] 
<strong>Explanation:</strong> The queries are processed as follow: 
For i=0: queries[i]=3, P=[1,2,3,4,5], position of 3 in P is <strong>2</strong>, then we move 3 to the beginning of P resulting in P=[3,1,2,4,5]. 
For i=1: queries[i]=1, P=[3,1,2,4,5], position of 1 in P is <strong>1</strong>, then we move 1 to the beginning of P resulting in P=[1,3,2,4,5]. 
For i=2: queries[i]=2, P=[1,3,2,4,5], position of 2 in P is <strong>2</strong>, then we move 2 to the beginning of P resulting in P=[2,1,3,4,5]. 
For i=3: queries[i]=1, P=[2,1,3,4,5], position of 1 in P is <strong>1</strong>, then we move 1 to the beginning of P resulting in P=[1,2,3,4,5]. 
Therefore, the array containing the result is [2,1,2,1].  
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> queries = [4,1,2,2], m = 4
<strong>Output:</strong> [3,1,2,0]
</pre>

<p><strong class="example">Example 3:</strong></p>

<pre>
<strong>Input:</strong> queries = [7,5,5,8,3], m = 8
<strong>Output:</strong> [6,5,0,7,5]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= m &lt;= 10^3</code></li>
	<li><code>1 &lt;= queries.length &lt;= m</code></li>
	<li><code>1 &lt;= queries[i] &lt;= m</code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-28">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/queue-reconstruction-by-height/description" target="_blank" rel="noopener noreferrer">Queue Reconstruction by Height</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">sorting</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given an array of people, <code>people</code>, which are the attributes of some people in a queue (not necessarily in order). Each <code>people[i] = [h<sub>i</sub>, k<sub>i</sub>]</code> represents the <code>i<sup>th</sup></code> person of height <code>h<sub>i</sub></code> with <strong>exactly</strong> <code>k<sub>i</sub></code> other people in front who have a height greater than or equal to <code>h<sub>i</sub></code>.</p>

<p>Reconstruct and return <em>the queue that is represented by the input array </em><code>people</code>. The returned queue should be formatted as an array <code>queue</code>, where <code>queue[j] = [h<sub>j</sub>, k<sub>j</sub>]</code> is the attributes of the <code>j<sup>th</sup></code> person in the queue (<code>queue[0]</code> is the person at the front of the queue).</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> people = [[7,0],[4,4],[7,1],[5,0],[6,1],[5,2]]
<strong>Output:</strong> [[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]]
<strong>Explanation:</strong>
Person 0 has height 5 with no other people taller or the same height in front.
Person 1 has height 7 with no other people taller or the same height in front.
Person 2 has height 5 with two persons taller or the same height in front, which is person 0 and 1.
Person 3 has height 6 with one person taller or the same height in front, which is person 1.
Person 4 has height 4 with four people taller or the same height in front, which are people 0, 1, 2, and 3.
Person 5 has height 7 with one person taller or the same height in front, which is person 1.
Hence [[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]] is the reconstructed queue.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> people = [[6,0],[5,0],[4,0],[3,2],[2,2],[1,4]]
<strong>Output:</strong> [[4,0],[5,0],[2,2],[3,2],[1,4],[6,0]]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= people.length &lt;= 2000</code></li>
	<li><code>0 &lt;= h<sub>i</sub> &lt;= 10<sup>6</sup></code></li>
	<li><code>0 &lt;= k<sub>i</sub> &lt; people.length</code></li>
	<li>It is guaranteed that the queue can be reconstructed.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-29">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/range-sum-query-mutable/description" target="_blank" rel="noopener noreferrer">Range Sum Query - Mutable</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge medium">Medium</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">design</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given an integer array <code>nums</code>, handle multiple queries of the following types:</p>

<ol>
	<li><strong>Update</strong> the value of an element in <code>nums</code>.</li>
	<li>Calculate the <strong>sum</strong> of the elements of <code>nums</code> between indices <code>left</code> and <code>right</code> <strong>inclusive</strong> where <code>left &lt;= right</code>.</li>
</ol>

<p>Implement the <code>NumArray</code> class:</p>

<ul>
	<li><code>NumArray(int[] nums)</code> Initializes the object with the integer array <code>nums</code>.</li>
	<li><code>void update(int index, int val)</code> <strong>Updates</strong> the value of <code>nums[index]</code> to be <code>val</code>.</li>
	<li><code>int sumRange(int left, int right)</code> Returns the <strong>sum</strong> of the elements of <code>nums</code> between indices <code>left</code> and <code>right</code> <strong>inclusive</strong> (i.e. <code>nums[left] + nums[left + 1] + ... + nums[right]</code>).</li>
</ul>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input</strong>
[&quot;NumArray&quot;, &quot;sumRange&quot;, &quot;update&quot;, &quot;sumRange&quot;]
[[[1, 3, 5]], [0, 2], [1, 2], [0, 2]]
<strong>Output</strong>
[null, 9, null, 8]

<strong>Explanation</strong>
NumArray numArray = new NumArray([1, 3, 5]);
numArray.sumRange(0, 2); // return 1 + 3 + 5 = 9
numArray.update(1, 2);   // nums = [1, 2, 5]
numArray.sumRange(0, 2); // return 1 + 2 + 5 = 8
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 3 * 10<sup>4</sup></code></li>
	<li><code>-100 &lt;= nums[i] &lt;= 100</code></li>
	<li><code>0 &lt;= index &lt; nums.length</code></li>
	<li><code>-100 &lt;= val &lt;= 100</code></li>
	<li><code>0 &lt;= left &lt;= right &lt; nums.length</code></li>
	<li>At most <code>3 * 10<sup>4</sup></code> calls will be made to <code>update</code> and <code>sumRange</code>.</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-30">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/reverse-pairs/description" target="_blank" rel="noopener noreferrer">Reverse Pairs</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">binary search</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">merge sort</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>Given an integer array <code>nums</code>, return <em>the number of <strong>reverse pairs</strong> in the array</em>.</p>

<p>A <strong>reverse pair</strong> is a pair <code>(i, j)</code> where:</p>

<ul>
	<li><code>0 &lt;= i &lt; j &lt; nums.length</code> and</li>
	<li><code>nums[i] &gt; 2 * nums[j]</code>.</li>
</ul>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,3,2,3,1]
<strong>Output:</strong> 2
<strong>Explanation:</strong> The reverse pairs are:
(1, 4) --&gt; nums[1] = 3, nums[4] = 1, 3 &gt; 2 * 1
(3, 4) --&gt; nums[3] = 3, nums[4] = 1, 3 &gt; 2 * 1
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [2,4,3,5,1]
<strong>Output:</strong> 3
<strong>Explanation:</strong> The reverse pairs are:
(1, 4) --&gt; nums[1] = 4, nums[4] = 1, 4 &gt; 2 * 1
(2, 4) --&gt; nums[2] = 3, nums[4] = 1, 3 &gt; 2 * 1
(3, 4) --&gt; nums[3] = 5, nums[4] = 1, 5 &gt; 2 * 1
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 5 * 10<sup>4</sup></code></li>
	<li><code>-2<sup>31</sup> &lt;= nums[i] &lt;= 2<sup>31</sup> - 1</code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-31">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/shortest-path-in-a-weighted-tree/description" target="_blank" rel="noopener noreferrer">Shortest Path in a Weighted Tree</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">depth-first search</span> <span class="topic-badge">segment tree</span> <span class="topic-badge">tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given an integer <code>n</code> and an undirected, weighted tree rooted at node 1 with <code>n</code> nodes numbered from 1 to <code>n</code>. This is represented by a 2D array <code>edges</code> of length <code>n - 1</code>, where <code>edges[i] = [u<sub>i</sub>, v<sub>i</sub>, w<sub>i</sub>]</code> indicates an undirected edge from node <code>u<sub>i</sub></code> to <code>v<sub>i</sub></code> with weight <code>w<sub>i</sub></code>.</p>

<p>You are also given a 2D integer array <code>queries</code> of length <code>q</code>, where each <code>queries[i]</code> is either:</p>

<ul>
	<li><code>[1, u, v, w&#39;]</code> &ndash; <strong>Update</strong> the weight of the edge between nodes <code>u</code> and <code>v</code> to <code>w&#39;</code>, where <code>(u, v)</code> is guaranteed to be an edge present in <code>edges</code>.</li>
	<li><code>[2, x]</code> &ndash; <strong>Compute</strong> the <strong>shortest</strong> path distance from the root node 1 to node <code>x</code>.</li>
</ul>

<p>Return an integer array <code>answer</code>, where <code>answer[i]</code> is the <strong>shortest</strong> path distance from node 1 to <code>x</code> for the <code>i<sup>th</sup></code> query of <code>[2, x]</code>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">n = 2, edges = [[1,2,7]], queries = [[2,2],[1,1,2,4],[2,2]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[7,4]</span></p>

<p><strong>Explanation:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2025/03/13/screenshot-2025-03-13-at-133524.png" style="width: 200px; height: 75px;" /></p>

<ul>
	<li>Query <code>[2,2]</code>: The shortest path from root node 1 to node 2 is 7.</li>
	<li>Query <code>[1,1,2,4]</code>: The weight of edge <code>(1,2)</code> changes from 7 to 4.</li>
	<li>Query <code>[2,2]</code>: The shortest path from root node 1 to node 2 is 4.</li>
</ul>
</div>

<p><strong class="example">Example 2:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">n = 3, edges = [[1,2,2],[1,3,4]], queries = [[2,1],[2,3],[1,1,3,7],[2,2],[2,3]]</span></p>

<p><strong>Output:</strong> <span class="example-io">[0,4,2,7]</span></p>

<p><strong>Explanation:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2025/03/13/screenshot-2025-03-13-at-132247.png" style="width: 180px; height: 141px;" /></p>

<ul>
	<li>Query <code>[2,1]</code>: The shortest path from root node 1 to node 1 is 0.</li>
	<li>Query <code>[2,3]</code>: The shortest path from root node 1 to node 3 is 4.</li>
	<li>Query <code>[1,1,3,7]</code>: The weight of edge <code>(1,3)</code> changes from 4 to 7.</li>
	<li>Query <code>[2,2]</code>: The shortest path from root node 1 to node 2 is 2.</li>
	<li>Query <code>[2,3]</code>: The shortest path from root node 1 to node 3 is 7.</li>
</ul>
</div>

<p><strong class="example">Example 3:</strong></p>

<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">n = 4, edges = [[1,2,2],[2,3,1],[3,4,5]], queries = [[2,4],[2,3],[1,2,3,3],[2,2],[2,3]]</span></p>

<p><strong>Output:</strong> [8,3,2,5]</p>

<p><strong>Explanation:</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2025/03/13/screenshot-2025-03-13-at-133306.png" style="width: 400px; height: 85px;" /></p>

<ul>
	<li>Query <code>[2,4]</code>: The shortest path from root node 1 to node 4 consists of edges <code>(1,2)</code>, <code>(2,3)</code>, and <code>(3,4)</code> with weights <code>2 + 1 + 5 = 8</code>.</li>
	<li>Query <code>[2,3]</code>: The shortest path from root node 1 to node 3 consists of edges <code>(1,2)</code> and <code>(2,3)</code> with weights <code>2 + 1 = 3</code>.</li>
	<li>Query <code>[1,2,3,3]</code>: The weight of edge <code>(2,3)</code> changes from 1 to 3.</li>
	<li>Query <code>[2,2]</code>: The shortest path from root node 1 to node 2 is 2.</li>
	<li>Query <code>[2,3]</code>: The shortest path from root node 1 to node 3 consists of edges <code>(1,2)</code> and <code>(2,3)</code> with updated weights <code>2 + 3 = 5</code>.</li>
</ul>
</div>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>edges.length == n - 1</code></li>
	<li><code>edges[i] == [u<sub>i</sub>, v<sub>i</sub>, w<sub>i</sub>]</code></li>
	<li><code>1 &lt;= u<sub>i</sub>, v<sub>i</sub> &lt;= n</code></li>
	<li><code>1 &lt;= w<sub>i</sub> &lt;= 10<sup>4</sup></code></li>
	<li>The input is generated such that <code>edges</code> represents a valid tree.</li>
	<li><code>1 &lt;= queries.length == q &lt;= 10<sup>5</sup></code></li>
	<li><code>queries[i].length == 2</code> or <code>4</code>
	<ul>
		<li><code>queries[i] == [1, u, v, w&#39;]</code> or,</li>
		<li><code>queries[i] == [2, x]</code></li>
		<li><code>1 &lt;= u, v, x &lt;= n</code></li>
		<li><code data-end="37" data-start="29">(u, v)</code> is always an edge from <code data-end="74" data-start="67">edges</code>.</li>
		<li><code>1 &lt;= w&#39; &lt;= 10<sup>4</sup></code></li>
	</ul>
	</li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-32">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/subarrays-distinct-element-sum-of-squares-ii/description" target="_blank" rel="noopener noreferrer">Subarrays Distinct Element Sum of Squares II</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>You are given a <strong>0-indexed </strong>integer array <code>nums</code>.</p>

<p>The <strong>distinct count</strong> of a subarray of <code>nums</code> is defined as:</p>

<ul>
	<li>Let <code>nums[i..j]</code> be a subarray of <code>nums</code> consisting of all the indices from <code>i</code> to <code>j</code> such that <code>0 &lt;= i &lt;= j &lt; nums.length</code>. Then the number of distinct values in <code>nums[i..j]</code> is called the distinct count of <code>nums[i..j]</code>.</li>
</ul>

<p>Return <em>the sum of the <strong>squares</strong> of <strong>distinct counts</strong> of all subarrays of </em><code>nums</code>.</p>

<p>Since the answer may be very large, return it <strong>modulo</strong> <code>10<sup>9</sup> + 7</code>.</p>

<p>A subarray is a contiguous <strong>non-empty</strong> sequence of elements within an array.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,2,1]
<strong>Output:</strong> 15
<strong>Explanation:</strong> Six possible subarrays are:
[1]: 1 distinct value
[2]: 1 distinct value
[1]: 1 distinct value
[1,2]: 2 distinct values
[2,1]: 2 distinct values
[1,2,1]: 2 distinct values
The sum of the squares of the distinct counts in all subarrays is equal to 1<sup>2</sup> + 1<sup>2</sup> + 1<sup>2</sup> + 2<sup>2</sup> + 2<sup>2</sup> + 2<sup>2</sup> = 15.
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [2,2]
<strong>Output:</strong> 3
<strong>Explanation:</strong> Three possible subarrays are:
[2]: 1 distinct value
[2]: 1 distinct value
[2,2]: 1 distinct value
The sum of the squares of the distinct counts in all subarrays is equal to 1<sup>2</sup> + 1<sup>2</sup> + 1<sup>2</sup> = 3.</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= nums[i] &lt;= 10<sup>5</sup></code></li>
</ul>
</div>
			</div>
			
			
		</div>

<div class="question-card" id="question-33">
			<div class="question-header">
				<div class="question-title-section">
					<h2 class="question-title">
						<a href="https://www.leetcode.com/problems/the-skyline-problem/description" target="_blank" rel="noopener noreferrer">The Skyline Problem</a>
					</h2>
					<div class="question-meta">
						<span class="platform-badge">LeetCode</span>
						<span class="difficulty-badge hard">Hard</span>
						
					</div>
				</div>
			</div>
			<div class="topics-section">
				<strong>Topics:</strong> <span class="topic-badge">array</span> <span class="topic-badge">binary indexed tree</span> <span class="topic-badge">divide and conquer</span> <span class="topic-badge">line sweep</span> <span class="topic-badge">ordered set</span> <span class="topic-badge">segment tree</span>
			</div>
			<div class="question-content">
				<div class="content-section"><p>A city&#39;s <strong>skyline</strong> is the outer contour of the silhouette formed by all the buildings in that city when viewed from a distance. Given the locations and heights of all the buildings, return <em>the <strong>skyline</strong> formed by these buildings collectively</em>.</p>

<p>The geometric information of each building is given in the array <code>buildings</code> where <code>buildings[i] = [left<sub>i</sub>, right<sub>i</sub>, height<sub>i</sub>]</code>:</p>

<ul>
	<li><code>left<sub>i</sub></code> is the x coordinate of the left edge of the <code>i<sup>th</sup></code> building.</li>
	<li><code>right<sub>i</sub></code> is the x coordinate of the right edge of the <code>i<sup>th</sup></code> building.</li>
	<li><code>height<sub>i</sub></code> is the height of the <code>i<sup>th</sup></code> building.</li>
</ul>

<p>You may assume all buildings are perfect rectangles grounded on an absolutely flat surface at height <code>0</code>.</p>

<p>The <strong>skyline</strong> should be represented as a list of &quot;key points&quot; <strong>sorted by their x-coordinate</strong> in the form <code>[[x<sub>1</sub>,y<sub>1</sub>],[x<sub>2</sub>,y<sub>2</sub>],...]</code>. Each key point is the left endpoint of some horizontal segment in the skyline except the last point in the list, which always has a y-coordinate <code>0</code> and is used to mark the skyline&#39;s termination where the rightmost building ends. Any ground between the leftmost and rightmost buildings should be part of the skyline&#39;s contour.</p>

<p><b>Note:</b> There must be no consecutive horizontal lines of equal height in the output skyline. For instance, <code>[...,[2 3],[4 5],[7 5],[11 5],[12 7],...]</code> is not acceptable; the three lines of height 5 should be merged into one in the final output as such: <code>[...,[2 3],[4 5],[12 7],...]</code></p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2020/12/01/merged.jpg" style="width: 800px; height: 331px;" />
<pre>
<strong>Input:</strong> buildings = [[2,9,10],[3,7,15],[5,12,12],[15,20,10],[19,24,8]]
<strong>Output:</strong> [[2,10],[3,15],[7,12],[12,0],[15,10],[20,8],[24,0]]
<strong>Explanation:</strong>
Figure A shows the buildings of the input.
Figure B shows the skyline formed by those buildings. The red points in figure B represent the key points in the output list.
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> buildings = [[0,2,3],[2,5,3]]
<strong>Output:</strong> [[0,3],[5,0]]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= buildings.length &lt;= 10<sup>4</sup></code></li>
	<li><code>0 &lt;= left<sub>i</sub> &lt; right<sub>i</sub> &lt;= 2<sup>31</sup> - 1</code></li>
	<li><code>1 &lt;= height<sub>i</sub> &lt;= 2<sup>31</sup> - 1</code></li>
	<li><code>buildings</code> is sorted by <code>left<sub>i</sub></code> in&nbsp;non-decreasing order.</li>
</ul>
</div>
			</div>
			
			
		</div>
        </div>
    </div>
    
    <div class="footer">
        <p>Generated by pushkar</p>
        <p>Programming Questions Collection</p>
    </div>
    
    <script>
        // Smooth scrolling for TOC links
        document.querySelectorAll('.toc-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Add scroll-to-top functionality
        window.addEventListener('scroll', function() {
            if (window.scrollY > 300) {
                if (!document.querySelector('.scroll-top')) {
                    const scrollTop = document.createElement('button');
                    scrollTop.className = 'scroll-top';
                    scrollTop.innerHTML = '↑';
                    scrollTop.style.cssText = 'position: fixed; bottom: 20px; right: 20px; background: #58a6ff; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; font-size: 20px; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: all 0.3s ease;';
                    scrollTop.addEventListener('click', () => window.scrollTo({top: 0, behavior: 'smooth'}));
                    document.body.appendChild(scrollTop);
                }
            } else {
                const scrollTop = document.querySelector('.scroll-top');
                if (scrollTop) scrollTop.remove();
            }
        });
    </script>
    
    <style>
        .footer {
            background: linear-gradient(135deg, #21262d 0%, #30363d 100%);
            color: #8b949e;
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            border-top: 2px solid #30363d;
        }
        
        .footer p {
            margin: 8px 0;
            font-size: 1rem;
        }
        
        .footer p:first-child {
            color: #f0f6fc;
            font-weight: 600;
            font-size: 1.1rem;
        }
    </style>
</body>
</html>